65047
Test: public void testBasicTraversal() throws Exception { MAPPER.acceptJsonFormatVisitor(POJO.class, new BogusJsonFormatVisitorWrapper()); MAPPER.acceptJsonFormatVisitor(POJOWithScalars.class, new BogusJsonFormatVisitorWrapper()); MAPPER.acceptJsonFormatVisitor(LinkedHashMap.class, new BogusJsonFormatVisitorWrapper()); MAPPER.acceptJsonFormatVisitor(ArrayList.class, new BogusJsonFormatVisitorWrapper()); MAPPER.acceptJsonFormatVisitor(EnumSet.class, new BogusJsonFormatVisitorWrapper()); MAPPER.acceptJsonFormatVisitor(POJOWithRefs.class, new BogusJsonFormatVisitorWrapper()); MAPPER.acceptJsonFormatVisitor(POJOWithJsonValue.class, new BogusJsonFormatVisitorWrapper()); }
Code: public void acceptJsonFormatVisitor(JsonFormatVisitorWrapper visitor, JavaType typeHint) throws JsonMappingException { if (_isInt) { visitIntFormat(visitor, typeHint, JsonParser.NumberType.BIG_INTEGER); } else { if (((Class<?>) handledType()) == BigDecimal.class) { visitFloatFormat(visitor, typeHint, JsonParser.NumberType.BIG_DECIMAL); } else { visitor.expectNumberFormat(typeHint); } } }
tensor([[0.0234, 0.0186, 0.0260,  ..., 0.0094, 0.0094, 0.0094],
        [0.0193, 0.0154, 0.0253,  ..., 0.0084, 0.0084, 0.0084],
        [0.0181, 0.0149, 0.0293,  ..., 0.0064, 0.0064, 0.0064],
        ...,
        [0.0168, 0.0147, 0.0175,  ..., 0.0077, 0.0077, 0.0077],
        [0.0168, 0.0147, 0.0175,  ..., 0.0077, 0.0077, 0.0077],
        [0.0168, 0.0147, 0.0175,  ..., 0.0077, 0.0077, 0.0077]])