60854
Test: public void testJdbcPrinterWithResultSetMetaData() throws IOException, ClassNotFoundException, SQLException { final StringWriter sw = new StringWriter(); Class.forName("org.h2.Driver"); final Connection connection = geH2Connection(); try { setUpTable(connection); @SuppressWarnings("resource") final Statement stmt = connection.createStatement(); @SuppressWarnings("resource") final ResultSet resultSet = stmt.executeQuery("select ID, NAME from TEST"); final CSVPrinter printer = CSVFormat.DEFAULT.withHeader(resultSet.getMetaData()).print(sw); printer.printRecords(resultSet); printer.close(); } finally { connection.close(); } }
Code: private void print(final Object object, final CharSequence value, final int offset, final int len) throws IOException { if (!newRecord) { out.append(format.getDelimiter()); } if (object == null) { out.append(value); } else if (format.isQuoteCharacterSet()) { printAndQuote(object, value, offset, len); } else if (format.isEscapeCharacterSet()) { printAndEscape(value, offset, len); } else { out.append(value, offset, offset + len); } newRecord = false; }
tensor([[0.0178, 0.0093, 0.0372,  ..., 0.0072, 0.0156, 0.0056],
        [0.0134, 0.0087, 0.0339,  ..., 0.0080, 0.0159, 0.0057],
        [0.0157, 0.0085, 0.0244,  ..., 0.0090, 0.0175, 0.0049],
        ...,
        [0.0180, 0.0118, 0.0255,  ..., 0.0121, 0.0192, 0.0072],
        [0.0155, 0.0113, 0.0346,  ..., 0.0110, 0.0222, 0.0072],
        [0.0127, 0.0075, 0.0248,  ..., 0.0073, 0.0179, 0.0046]])