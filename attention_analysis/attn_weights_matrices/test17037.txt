17037
Test: public void testFunction() { String g = "function g(){}"; String fAndG = "function f(){" + g + "}"; String js = "var h=" + fAndG + ";h()"; FunctionInformationMap.Builder expected = FunctionInformationMap.newBuilder(); expected.addEntry( FunctionInformationMap.Entry.newBuilder() .setId(0) .setSourceName("testcode") .setLineNumber(1) .setModuleName("") .setSize(g.length()) .setName("f::g") .setCompiledSource(g).build()); expected.addEntry( FunctionInformationMap.Entry.newBuilder() .setId(1) .setSourceName("testcode") .setLineNumber(1) .setModuleName("") .setSize(fAndG.length()) .setName("f") .setCompiledSource(fAndG).build()); expected.addModule( FunctionInformationMap.Module.newBuilder() .setName("") .setCompiledSource(js + ";").build()); test(js, expected.build()); }
Code: public JSType build() { if (isEmpty) { return registry.getNativeObjectType(JSTypeNative.OBJECT_TYPE); } return new RecordType( registry, Collections.unmodifiableMap(properties), isDeclared); }
[[0.04813133 0.12626065 0.02026753 0.06019043 0.12932964 0.06723446
 0.06019043 0.05247797 0.09219509 0.01963495 0.05247797 0.02455065
 0.05225177 0.07869802 0.04255322 0.05392089 0.01963495]
[0.03218083 0.15755773 0.02456266 0.0630818  0.12637019 0.07897587
 0.0630818  0.05186794 0.09293672 0.01534306 0.05186794 0.02450844
 0.04177284 0.06549405 0.04011538 0.05493968 0.01534306]
[0.03995515 0.16467683 0.02518233 0.05588294 0.12069286 0.07719948
 0.05588294 0.05116961 0.09468152 0.01704948 0.05116961 0.02259112
 0.03831203 0.0659507  0.04167942 0.06087451 0.01704948]
[0.05091405 0.07847893 0.0291245  0.07345081 0.08879504 0.06210247
 0.07345081 0.059694   0.076553   0.02723991 0.059694   0.02962564
 0.05525548 0.07951776 0.06421524 0.06464844 0.02723991]
[0.02709443 0.21855876 0.01490707 0.05509837 0.15207374 0.05949012
 0.05509837 0.03557105 0.07621081 0.00851426 0.03557105 0.01040628
 0.02688264 0.09541746 0.03083932 0.08975202 0.00851426]
[0.0363987  0.12249478 0.01842689 0.06082967 0.14297175 0.06819353
 0.06082967 0.04587553 0.09251677 0.02024725 0.04587553 0.02232493
 0.04215621 0.09292119 0.04365648 0.06403381 0.02024726]
[0.05091405 0.07847893 0.0291245  0.07345081 0.08879504 0.06210247
 0.07345081 0.059694   0.076553   0.02723991 0.059694   0.02962564
 0.05525548 0.07951776 0.06421524 0.06464844 0.02723991]
[0.03200845 0.16049919 0.02243496 0.05818497 0.13484758 0.06617738
 0.05818497 0.04722504 0.0740231  0.01616843 0.04722504 0.01930207
 0.04329302 0.08608413 0.04075208 0.07742119 0.01616843]
[0.03263212 0.14428063 0.02193506 0.07723342 0.12918726 0.06599568
 0.07723342 0.05661754 0.07026128 0.01546122 0.05661754 0.02326194
 0.04409127 0.06026443 0.03819674 0.07126921 0.01546122]
[0.03299162 0.11984952 0.02717823 0.07004692 0.12408867 0.07497343
 0.07004692 0.06779405 0.0882289  0.01578417 0.06779405 0.01841198
 0.05007267 0.06585057 0.03651971 0.05458434 0.01578417]
[0.03200845 0.16049919 0.02243496 0.05818497 0.13484758 0.06617738
 0.05818497 0.04722504 0.0740231  0.01616843 0.04722504 0.01930207
 0.04329302 0.08608413 0.04075208 0.07742119 0.01616843]
[0.039993   0.12873675 0.02532002 0.06761777 0.13877341 0.08257928
 0.06761777 0.0561316  0.07169751 0.01997621 0.0561316  0.0265506
 0.04600366 0.05574512 0.03918131 0.05796814 0.01997621]
[0.0390791  0.15507345 0.02213281 0.06464948 0.10796688 0.06608824
 0.06464948 0.04875822 0.09352054 0.01599719 0.04875822 0.02438801
 0.04173109 0.07673501 0.04892363 0.06555144 0.01599719]
[0.03926133 0.1377388  0.02601643 0.07657085 0.12030621 0.06570973
 0.07657085 0.04799608 0.07691643 0.02231381 0.04799608 0.02630665
 0.04185081 0.07353072 0.03706049 0.06154086 0.02231381]
[0.03531655 0.15783389 0.0174716  0.06820795 0.12644961 0.07268637
 0.06820795 0.05088744 0.07297252 0.01114078 0.05088744 0.01820834
 0.03592269 0.07899362 0.04299021 0.08068226 0.01114077]
[0.03948186 0.10746764 0.02607479 0.05545079 0.1203565  0.08450443
 0.05545079 0.05271089 0.08390769 0.01970022 0.05271089 0.02032568
 0.04180956 0.09858678 0.05721457 0.06454666 0.01970022]
[0.03299162 0.11984953 0.02717823 0.07004693 0.12408864 0.07497343
 0.07004693 0.06779405 0.0882289  0.01578417 0.06779405 0.01841199
 0.05007266 0.0658506  0.03651971 0.05458433 0.01578417]]