16524
Test: public void testGetScopeRoot() { Compiler compiler = new Compiler(); NodeTraversal t = new NodeTraversal(compiler, new NodeTraversal.ScopedCallback() { @Override public void enterScope(NodeTraversal t) { Node root1 = t.getScopeRoot(); Node root2 = t.getScope().getRootNode(); } @Override public void exitScope(NodeTraversal t) { } @Override public boolean shouldTraverse(NodeTraversal t, Node n, Node parent) { return true; } @Override public void visit(NodeTraversal t, Node n, Node parent) { } } ); String code = "" + "var a; " + "function foo() {" + " var b" + "}"; Node tree = parse(compiler, code); t.traverse(tree); }
Code: public void enterScope(NodeTraversal t) { Node n = t.getCurrentNode().getParent(); if (n != null && isCallToScopeMethod(n)) { transformation = transformationHandler.logAliasTransformation( n.getSourceFileName(), getSourceRegion(n)); findAliases(t); } }
tensor([[0.0282, 0.0235, 0.2102, 0.0144, 0.0435, 0.0584, 0.0175, 0.0181, 0.0233,
         0.0766, 0.0234, 0.0161, 0.0306, 0.0189, 0.0366, 0.0435, 0.0387, 0.0181,
         0.0606, 0.0439, 0.1037, 0.0252, 0.0133, 0.0133],
        [0.0192, 0.0184, 0.2924, 0.0085, 0.0407, 0.0585, 0.0124, 0.0169, 0.0137,
         0.0651, 0.0163, 0.0135, 0.0220, 0.0130, 0.0338, 0.0407, 0.0357, 0.0169,
         0.0510, 0.0325, 0.1326, 0.0221, 0.0121, 0.0121],
        [0.0190, 0.0154, 0.2991, 0.0091, 0.0412, 0.0622, 0.0150, 0.0162, 0.0141,
         0.0844, 0.0171, 0.0108, 0.0186, 0.0155, 0.0250, 0.0412, 0.0371, 0.0162,
         0.0616, 0.0256, 0.1199, 0.0188, 0.0085, 0.0085],
        [0.0155, 0.0144, 0.2781, 0.0088, 0.0552, 0.0577, 0.0155, 0.0160, 0.0169,
         0.0765, 0.0186, 0.0095, 0.0162, 0.0138, 0.0301, 0.0552, 0.0376, 0.0160,
         0.0600, 0.0287, 0.1278, 0.0164, 0.0078, 0.0078],
        [0.0305, 0.0267, 0.1755, 0.0157, 0.0498, 0.0509, 0.0202, 0.0255, 0.0275,
         0.0525, 0.0264, 0.0218, 0.0248, 0.0268, 0.0363, 0.0498, 0.0485, 0.0255,
         0.0596, 0.0344, 0.1037, 0.0326, 0.0175, 0.0175],
        [0.0202, 0.0218, 0.2564, 0.0116, 0.0511, 0.0639, 0.0191, 0.0197, 0.0186,
         0.0721, 0.0160, 0.0152, 0.0229, 0.0161, 0.0332, 0.0511, 0.0422, 0.0197,
         0.0581, 0.0275, 0.1008, 0.0240, 0.0093, 0.0093],
        [0.0211, 0.0246, 0.3257, 0.0092, 0.0451, 0.0475, 0.0142, 0.0130, 0.0152,
         0.0647, 0.0165, 0.0111, 0.0201, 0.0145, 0.0285, 0.0451, 0.0383, 0.0130,
         0.0503, 0.0272, 0.1175, 0.0190, 0.0093, 0.0093],
        [0.0347, 0.0283, 0.1330, 0.0227, 0.0394, 0.0532, 0.0256, 0.0288, 0.0291,
         0.0768, 0.0256, 0.0291, 0.0285, 0.0295, 0.0330, 0.0394, 0.0455, 0.0288,
         0.0733, 0.0340, 0.0990, 0.0285, 0.0170, 0.0170],
        [0.0195, 0.0175, 0.2299, 0.0120, 0.0514, 0.0615, 0.0183, 0.0190, 0.0198,
         0.0738, 0.0177, 0.0132, 0.0216, 0.0211, 0.0299, 0.0514, 0.0430, 0.0190,
         0.0680, 0.0314, 0.1197, 0.0211, 0.0101, 0.0101],
        [0.0130, 0.0113, 0.3938, 0.0044, 0.0395, 0.0598, 0.0078, 0.0112, 0.0084,
         0.0780, 0.0241, 0.0063, 0.0110, 0.0078, 0.0224, 0.0395, 0.0282, 0.0112,
         0.0472, 0.0150, 0.1375, 0.0113, 0.0056, 0.0056],
        [0.0240, 0.0186, 0.2763, 0.0104, 0.0465, 0.0604, 0.0129, 0.0179, 0.0163,
         0.0765, 0.0196, 0.0145, 0.0185, 0.0166, 0.0274, 0.0465, 0.0396, 0.0179,
         0.0615, 0.0298, 0.1082, 0.0212, 0.0095, 0.0095],
        [0.0178, 0.0134, 0.2662, 0.0082, 0.0521, 0.0631, 0.0125, 0.0157, 0.0124,
         0.0778, 0.0155, 0.0085, 0.0177, 0.0123, 0.0240, 0.0521, 0.0374, 0.0157,
         0.0689, 0.0257, 0.1483, 0.0177, 0.0086, 0.0086],
        [0.0231, 0.0184, 0.2192, 0.0119, 0.0594, 0.0677, 0.0181, 0.0208, 0.0189,
         0.0729, 0.0161, 0.0134, 0.0209, 0.0184, 0.0333, 0.0594, 0.0445, 0.0208,
         0.0553, 0.0324, 0.1090, 0.0283, 0.0089, 0.0089],
        [0.0210, 0.0211, 0.2766, 0.0108, 0.0479, 0.0519, 0.0140, 0.0178, 0.0151,
         0.0667, 0.0189, 0.0148, 0.0234, 0.0150, 0.0337, 0.0479, 0.0408, 0.0178,
         0.0546, 0.0316, 0.1018, 0.0268, 0.0150, 0.0150],
        [0.0232, 0.0195, 0.2243, 0.0087, 0.0520, 0.0537, 0.0139, 0.0192, 0.0183,
         0.0805, 0.0136, 0.0125, 0.0216, 0.0153, 0.0332, 0.0520, 0.0476, 0.0192,
         0.0608, 0.0372, 0.1267, 0.0235, 0.0116, 0.0116],
        [0.0305, 0.0267, 0.1755, 0.0157, 0.0498, 0.0509, 0.0202, 0.0255, 0.0275,
         0.0525, 0.0264, 0.0218, 0.0248, 0.0268, 0.0363, 0.0498, 0.0485, 0.0255,
         0.0596, 0.0344, 0.1037, 0.0326, 0.0175, 0.0175],
        [0.0249, 0.0271, 0.1954, 0.0142, 0.0447, 0.0468, 0.0168, 0.0217, 0.0200,
         0.0664, 0.0188, 0.0179, 0.0260, 0.0194, 0.0334, 0.0447, 0.0587, 0.0217,
         0.0595, 0.0381, 0.1245, 0.0263, 0.0165, 0.0165],
        [0.0347, 0.0283, 0.1330, 0.0227, 0.0394, 0.0532, 0.0256, 0.0288, 0.0291,
         0.0768, 0.0256, 0.0291, 0.0285, 0.0295, 0.0330, 0.0394, 0.0455, 0.0288,
         0.0733, 0.0340, 0.0990, 0.0285, 0.0170, 0.0170],
        [0.0208, 0.0181, 0.2663, 0.0129, 0.0520, 0.0462, 0.0139, 0.0135, 0.0209,
         0.0740, 0.0158, 0.0153, 0.0235, 0.0191, 0.0341, 0.0520, 0.0405, 0.0135,
         0.0475, 0.0333, 0.1206, 0.0222, 0.0121, 0.0121],
        [0.0290, 0.0236, 0.1893, 0.0161, 0.0473, 0.0593, 0.0230, 0.0203, 0.0223,
         0.0683, 0.0195, 0.0164, 0.0286, 0.0212, 0.0307, 0.0473, 0.0452, 0.0203,
         0.0525, 0.0367, 0.1279, 0.0262, 0.0144, 0.0144],
        [0.0263, 0.0215, 0.1633, 0.0169, 0.0495, 0.0521, 0.0204, 0.0210, 0.0221,
         0.0928, 0.0224, 0.0209, 0.0220, 0.0211, 0.0361, 0.0495, 0.0470, 0.0210,
         0.0631, 0.0332, 0.1183, 0.0320, 0.0137, 0.0137],
        [0.0159, 0.0174, 0.2601, 0.0076, 0.0621, 0.0538, 0.0150, 0.0142, 0.0120,
         0.0872, 0.0126, 0.0097, 0.0205, 0.0119, 0.0279, 0.0621, 0.0383, 0.0142,
         0.0552, 0.0300, 0.1382, 0.0184, 0.0079, 0.0079],
        [0.0206, 0.0192, 0.1843, 0.0132, 0.0538, 0.0820, 0.0187, 0.0187, 0.0203,
         0.0797, 0.0145, 0.0151, 0.0233, 0.0177, 0.0351, 0.0538, 0.0392, 0.0187,
         0.0782, 0.0317, 0.1151, 0.0240, 0.0115, 0.0115],
        [0.0206, 0.0192, 0.1843, 0.0132, 0.0538, 0.0820, 0.0187, 0.0187, 0.0203,
         0.0797, 0.0145, 0.0151, 0.0233, 0.0177, 0.0351, 0.0538, 0.0392, 0.0187,
         0.0782, 0.0317, 0.1151, 0.0240, 0.0115, 0.0115]])