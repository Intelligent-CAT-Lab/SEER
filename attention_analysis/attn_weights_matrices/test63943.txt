63943
Test: public void testSmallSymbolSetWithChars() throws IOException { final int SEED = 33333; CharsToNameCanonicalizer symbols = CharsToNameCanonicalizer.createRoot(SEED); JsonFactory f = new JsonFactory(); JsonParser p = f.createParser(JSON); JsonToken t; while ((t = p.nextToken()) != null) { if (t != JsonToken.FIELD_NAME) { continue; } String name = p.getCurrentName(); char[] ch = name.toCharArray(); symbols.findSymbol(ch, 0, ch.length, symbols.calcHash(name)); } p.close(); }
Code: public int calcHash(int q1) { int hash = q1 ^ _seed; hash += (hash >>> 16); hash ^= (hash << 3); hash += (hash >>> 12); return hash; }
tensor([[0.0190, 0.0106, 0.0376, 0.0087, 0.0324, 0.0106, 0.0548, 0.0124, 0.0620,
         0.0271, 0.0366, 0.0548, 0.0333, 0.0634, 0.0153, 0.0338, 0.0548, 0.0148,
         0.0634, 0.0289, 0.0540, 0.0548, 0.0333, 0.0634, 0.0153, 0.0485, 0.0218,
         0.0248, 0.0096],
        [0.0125, 0.0080, 0.0483, 0.0094, 0.0343, 0.0080, 0.0485, 0.0105, 0.0621,
         0.0230, 0.0304, 0.0485, 0.0348, 0.0678, 0.0163, 0.0417, 0.0485, 0.0158,
         0.0678, 0.0235, 0.0431, 0.0485, 0.0348, 0.0678, 0.0163, 0.0754, 0.0209,
         0.0267, 0.0068],
        [0.0231, 0.0098, 0.0380, 0.0135, 0.0474, 0.0098, 0.0532, 0.0164, 0.0477,
         0.0234, 0.0403, 0.0532, 0.0410, 0.0539, 0.0188, 0.0281, 0.0532, 0.0180,
         0.0539, 0.0254, 0.0553, 0.0532, 0.0410, 0.0539, 0.0188, 0.0303, 0.0340,
         0.0370, 0.0084],
        [0.0208, 0.0079, 0.0366, 0.0106, 0.0300, 0.0079, 0.0426, 0.0135, 0.0575,
         0.0225, 0.0393, 0.0426, 0.0353, 0.0783, 0.0208, 0.0318, 0.0426, 0.0183,
         0.0783, 0.0282, 0.0533, 0.0426, 0.0353, 0.0783, 0.0208, 0.0448, 0.0267,
         0.0251, 0.0077],
        [0.0232, 0.0104, 0.0362, 0.0149, 0.0440, 0.0104, 0.0502, 0.0196, 0.0470,
         0.0280, 0.0380, 0.0502, 0.0337, 0.0629, 0.0173, 0.0357, 0.0502, 0.0229,
         0.0629, 0.0301, 0.0341, 0.0502, 0.0337, 0.0629, 0.0173, 0.0373, 0.0258,
         0.0366, 0.0144],
        [0.0125, 0.0080, 0.0483, 0.0094, 0.0343, 0.0080, 0.0485, 0.0105, 0.0621,
         0.0230, 0.0304, 0.0485, 0.0348, 0.0678, 0.0163, 0.0417, 0.0485, 0.0158,
         0.0678, 0.0235, 0.0431, 0.0485, 0.0348, 0.0678, 0.0163, 0.0754, 0.0209,
         0.0267, 0.0068],
        [0.0218, 0.0115, 0.0367, 0.0121, 0.0329, 0.0115, 0.0538, 0.0148, 0.0572,
         0.0262, 0.0352, 0.0538, 0.0369, 0.0577, 0.0200, 0.0317, 0.0538, 0.0185,
         0.0577, 0.0269, 0.0397, 0.0538, 0.0369, 0.0577, 0.0200, 0.0547, 0.0236,
         0.0337, 0.0091],
        [0.0248, 0.0144, 0.0386, 0.0139, 0.0318, 0.0144, 0.0476, 0.0217, 0.0552,
         0.0285, 0.0442, 0.0476, 0.0334, 0.0560, 0.0233, 0.0316, 0.0476, 0.0242,
         0.0560, 0.0341, 0.0323, 0.0476, 0.0334, 0.0560, 0.0233, 0.0381, 0.0279,
         0.0392, 0.0131],
        [0.0118, 0.0046, 0.0351, 0.0089, 0.0321, 0.0046, 0.0549, 0.0084, 0.0641,
         0.0222, 0.0256, 0.0549, 0.0406, 0.0806, 0.0111, 0.0378, 0.0549, 0.0098,
         0.0806, 0.0206, 0.0496, 0.0549, 0.0406, 0.0806, 0.0111, 0.0504, 0.0189,
         0.0263, 0.0046],
        [0.0162, 0.0058, 0.0383, 0.0082, 0.0400, 0.0058, 0.0463, 0.0108, 0.0589,
         0.0227, 0.0297, 0.0463, 0.0410, 0.0681, 0.0168, 0.0288, 0.0463, 0.0127,
         0.0681, 0.0256, 0.0567, 0.0463, 0.0410, 0.0681, 0.0168, 0.0628, 0.0279,
         0.0383, 0.0058],
        [0.0134, 0.0074, 0.0418, 0.0106, 0.0342, 0.0074, 0.0464, 0.0092, 0.0601,
         0.0239, 0.0351, 0.0464, 0.0320, 0.0785, 0.0119, 0.0353, 0.0464, 0.0160,
         0.0785, 0.0282, 0.0538, 0.0464, 0.0320, 0.0785, 0.0119, 0.0583, 0.0179,
         0.0320, 0.0067],
        [0.0218, 0.0115, 0.0367, 0.0121, 0.0329, 0.0115, 0.0538, 0.0148, 0.0572,
         0.0262, 0.0352, 0.0538, 0.0369, 0.0577, 0.0200, 0.0317, 0.0538, 0.0185,
         0.0577, 0.0269, 0.0397, 0.0538, 0.0369, 0.0577, 0.0200, 0.0547, 0.0236,
         0.0337, 0.0091],
        [0.0177, 0.0084, 0.0379, 0.0111, 0.0422, 0.0084, 0.0587, 0.0108, 0.0523,
         0.0239, 0.0258, 0.0587, 0.0395, 0.0567, 0.0183, 0.0348, 0.0587, 0.0170,
         0.0567, 0.0255, 0.0526, 0.0587, 0.0395, 0.0567, 0.0183, 0.0450, 0.0174,
         0.0410, 0.0076],
        [0.0169, 0.0075, 0.0373, 0.0066, 0.0300, 0.0075, 0.0495, 0.0106, 0.0699,
         0.0224, 0.0372, 0.0495, 0.0388, 0.0657, 0.0148, 0.0306, 0.0495, 0.0153,
         0.0657, 0.0307, 0.0586, 0.0495, 0.0388, 0.0657, 0.0148, 0.0669, 0.0174,
         0.0254, 0.0065],
        [0.0153, 0.0070, 0.0387, 0.0098, 0.0312, 0.0070, 0.0466, 0.0121, 0.0482,
         0.0208, 0.0338, 0.0466, 0.0363, 0.0736, 0.0142, 0.0328, 0.0466, 0.0147,
         0.0736, 0.0289, 0.0595, 0.0466, 0.0363, 0.0736, 0.0142, 0.0657, 0.0251,
         0.0311, 0.0098],
        [0.0204, 0.0073, 0.0371, 0.0098, 0.0396, 0.0073, 0.0500, 0.0106, 0.0517,
         0.0210, 0.0389, 0.0500, 0.0277, 0.0804, 0.0150, 0.0271, 0.0500, 0.0169,
         0.0804, 0.0274, 0.0464, 0.0500, 0.0277, 0.0804, 0.0150, 0.0485, 0.0211,
         0.0340, 0.0079],
        [0.0218, 0.0115, 0.0367, 0.0121, 0.0329, 0.0115, 0.0538, 0.0148, 0.0572,
         0.0262, 0.0352, 0.0538, 0.0369, 0.0577, 0.0200, 0.0317, 0.0538, 0.0185,
         0.0577, 0.0269, 0.0397, 0.0538, 0.0369, 0.0577, 0.0200, 0.0547, 0.0236,
         0.0337, 0.0091],
        [0.0195, 0.0087, 0.0352, 0.0116, 0.0395, 0.0087, 0.0506, 0.0120, 0.0488,
         0.0237, 0.0396, 0.0506, 0.0299, 0.0794, 0.0125, 0.0246, 0.0506, 0.0178,
         0.0794, 0.0298, 0.0463, 0.0506, 0.0299, 0.0794, 0.0125, 0.0401, 0.0219,
         0.0355, 0.0110],
        [0.0169, 0.0075, 0.0373, 0.0066, 0.0300, 0.0075, 0.0495, 0.0106, 0.0699,
         0.0224, 0.0372, 0.0495, 0.0388, 0.0657, 0.0148, 0.0306, 0.0495, 0.0153,
         0.0657, 0.0307, 0.0586, 0.0495, 0.0388, 0.0657, 0.0148, 0.0669, 0.0174,
         0.0254, 0.0065],
        [0.0154, 0.0098, 0.0394, 0.0098, 0.0461, 0.0098, 0.0502, 0.0149, 0.0544,
         0.0284, 0.0370, 0.0502, 0.0330, 0.0577, 0.0168, 0.0322, 0.0502, 0.0220,
         0.0577, 0.0363, 0.0405, 0.0502, 0.0330, 0.0577, 0.0168, 0.0527, 0.0220,
         0.0474, 0.0084],
        [0.0081, 0.0055, 0.0396, 0.0058, 0.0298, 0.0055, 0.0458, 0.0081, 0.0709,
         0.0173, 0.0236, 0.0458, 0.0453, 0.0721, 0.0149, 0.0444, 0.0458, 0.0093,
         0.0721, 0.0196, 0.0610, 0.0458, 0.0453, 0.0721, 0.0149, 0.0845, 0.0176,
         0.0253, 0.0044],
        [0.0218, 0.0115, 0.0367, 0.0121, 0.0329, 0.0115, 0.0538, 0.0148, 0.0572,
         0.0262, 0.0352, 0.0538, 0.0369, 0.0577, 0.0200, 0.0317, 0.0538, 0.0185,
         0.0577, 0.0269, 0.0397, 0.0538, 0.0369, 0.0577, 0.0200, 0.0547, 0.0236,
         0.0337, 0.0091],
        [0.0177, 0.0084, 0.0379, 0.0111, 0.0422, 0.0084, 0.0587, 0.0108, 0.0523,
         0.0239, 0.0258, 0.0587, 0.0395, 0.0567, 0.0183, 0.0348, 0.0587, 0.0170,
         0.0567, 0.0255, 0.0526, 0.0587, 0.0395, 0.0567, 0.0183, 0.0450, 0.0174,
         0.0410, 0.0076],
        [0.0169, 0.0075, 0.0373, 0.0066, 0.0300, 0.0075, 0.0495, 0.0106, 0.0699,
         0.0224, 0.0372, 0.0495, 0.0388, 0.0657, 0.0148, 0.0306, 0.0495, 0.0153,
         0.0657, 0.0307, 0.0586, 0.0495, 0.0388, 0.0657, 0.0148, 0.0669, 0.0174,
         0.0254, 0.0065],
        [0.0153, 0.0070, 0.0387, 0.0098, 0.0312, 0.0070, 0.0466, 0.0121, 0.0482,
         0.0208, 0.0338, 0.0466, 0.0363, 0.0736, 0.0142, 0.0328, 0.0466, 0.0147,
         0.0736, 0.0289, 0.0595, 0.0466, 0.0363, 0.0736, 0.0142, 0.0657, 0.0251,
         0.0311, 0.0098],
        [0.0172, 0.0097, 0.0365, 0.0100, 0.0443, 0.0097, 0.0538, 0.0107, 0.0495,
         0.0190, 0.0343, 0.0538, 0.0275, 0.0806, 0.0184, 0.0277, 0.0538, 0.0140,
         0.0806, 0.0292, 0.0443, 0.0538, 0.0275, 0.0806, 0.0184, 0.0355, 0.0198,
         0.0304, 0.0095],
        [0.0134, 0.0068, 0.0408, 0.0085, 0.0324, 0.0068, 0.0442, 0.0135, 0.0611,
         0.0204, 0.0315, 0.0442, 0.0411, 0.0763, 0.0175, 0.0283, 0.0442, 0.0148,
         0.0763, 0.0288, 0.0565, 0.0442, 0.0411, 0.0763, 0.0175, 0.0583, 0.0184,
         0.0284, 0.0086],
        [0.0195, 0.0080, 0.0405, 0.0120, 0.0346, 0.0080, 0.0506, 0.0120, 0.0503,
         0.0300, 0.0338, 0.0506, 0.0417, 0.0616, 0.0150, 0.0324, 0.0506, 0.0181,
         0.0616, 0.0242, 0.0510, 0.0506, 0.0417, 0.0616, 0.0150, 0.0579, 0.0203,
         0.0370, 0.0094],
        [0.0133, 0.0099, 0.0370, 0.0121, 0.0395, 0.0099, 0.0550, 0.0126, 0.0605,
         0.0211, 0.0369, 0.0550, 0.0316, 0.0475, 0.0139, 0.0448, 0.0550, 0.0174,
         0.0475, 0.0244, 0.0672, 0.0550, 0.0316, 0.0475, 0.0139, 0.0597, 0.0306,
         0.0411, 0.0082]])