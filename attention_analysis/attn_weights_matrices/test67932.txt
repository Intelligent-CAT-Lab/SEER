67932
Test: public void testXmlAttributesWithNextTextValue() throws Exception { final String XML = "<data max=\"7\" offset=\"9\"/>"; FromXmlParser xp = (FromXmlParser) _xmlFactory.createParser(new StringReader(XML)); xp.close(); }
Code: public String nextTextValue() throws IOException { _binaryValue = null; if (_nextToken != null) { JsonToken t = _nextToken; _currToken = t; _nextToken = null; if (t == JsonToken.VALUE_STRING) { return _currText; } _updateState(t); return null; } int token = _xmlTokens.next(); while (token == XmlTokenStream.XML_START_ELEMENT) { if (true) { _nextToken = JsonToken.FIELD_NAME; _parsingContext = _parsingContext.createChildObjectContext(-1, -1); _currToken = JsonToken.START_OBJECT; return null; } if (_parsingContext.inArray()) { token = _xmlTokens.next(); _mayBeLeaf = true; continue; } String name = _xmlTokens.getLocalName(); _parsingContext.setCurrentName(name); if (true && _namesToWrap.contains(name)) { _xmlTokens.repeatStartElement(); } _mayBeLeaf = true; _currToken = JsonToken.FIELD_NAME; return null; } switch (token) { case XmlTokenStream.XML_END_ELEMENT: if (_mayBeLeaf) { _mayBeLeaf = false; _currToken = JsonToken.VALUE_STRING; return (_currText = ""); } _currToken = _parsingContext.inArray() ? JsonToken.END_ARRAY : JsonToken.END_OBJECT; _parsingContext = _parsingContext.getParent(); _namesToWrap = _parsingContext.getNamesToWrap(); break; case XmlTokenStream.XML_ATTRIBUTE_NAME: if (_mayBeLeaf) { _mayBeLeaf = false; _nextToken = JsonToken.FIELD_NAME; _currText = _xmlTokens.getText(); _parsingContext = _parsingContext.createChildObjectContext(-1, -1); _currToken = JsonToken.START_OBJECT; } else { _parsingContext.setCurrentName(_xmlTokens.getLocalName()); _currToken = JsonToken.FIELD_NAME; } break; case XmlTokenStream.XML_ATTRIBUTE_VALUE: _currToken = JsonToken.VALUE_STRING; return (_currText = _xmlTokens.getText()); case XmlTokenStream.XML_TEXT: _currText = _xmlTokens.getText(); if (_mayBeLeaf) { _mayBeLeaf = false; _xmlTokens.skipEndElement(); ; return _currText; } _parsingContext.setCurrentName(_cfgNameForTextElement); _nextToken = JsonToken.VALUE_STRING; _currToken = JsonToken.FIELD_NAME; break; case XmlTokenStream.XML_END: _currToken = null; } return null; }
tensor([[0.0039, 0.0050, 0.0047,  ..., 0.0043, 0.0082, 0.0016],
        [0.0038, 0.0045, 0.0057,  ..., 0.0038, 0.0078, 0.0014],
        [0.0032, 0.0053, 0.0042,  ..., 0.0037, 0.0114, 0.0020],
        ...,
        [0.0025, 0.0059, 0.0046,  ..., 0.0036, 0.0093, 0.0013],
        [0.0038, 0.0062, 0.0053,  ..., 0.0045, 0.0072, 0.0016],
        [0.0027, 0.0049, 0.0045,  ..., 0.0056, 0.0091, 0.0013]])