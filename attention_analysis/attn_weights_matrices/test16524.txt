16524
Test: public void testGetScopeRoot() { Compiler compiler = new Compiler(); NodeTraversal t = new NodeTraversal(compiler, new NodeTraversal.ScopedCallback() { @Override public void enterScope(NodeTraversal t) { Node root1 = t.getScopeRoot(); Node root2 = t.getScope().getRootNode(); } @Override public void exitScope(NodeTraversal t) { } @Override public boolean shouldTraverse(NodeTraversal t, Node n, Node parent) { return true; } @Override public void visit(NodeTraversal t, Node n, Node parent) { } } ); String code = "" + "var a; " + "function foo() {" + " var b" + "}"; Node tree = parse(compiler, code); t.traverse(tree); }
Code: public void enterScope(NodeTraversal t) { Node n = t.getCurrentNode().getParent(); if (n != null && isCallToScopeMethod(n)) { transformation = transformationHandler.logAliasTransformation( n.getSourceFileName(), getSourceRegion(n)); findAliases(t); } }
[[0.02818868 0.02354365 0.21021754 0.01443014 0.04354905 0.05844564
 0.01754369 0.01811754 0.0233158  0.07658869 0.02335478 0.01614871
 0.03059711 0.01890881 0.03661608 0.04354905 0.03867577 0.01811754
 0.06064786 0.04386468 0.10374713 0.02520214 0.01331496 0.01331496]
[0.01924746 0.0183572  0.29239032 0.00848202 0.04068646 0.05853686
 0.01235298 0.01687787 0.01369595 0.0651422  0.01633459 0.01353447
 0.02204269 0.01295592 0.03378742 0.04068646 0.03566702 0.01687787
 0.05097004 0.03254608 0.13255028 0.02210126 0.01208831 0.01208831]
[0.01904908 0.015447   0.2991292  0.00907954 0.04115433 0.06223987
 0.01504343 0.01618253 0.01410349 0.08435756 0.01709139 0.01077159
 0.01863429 0.01549677 0.02501127 0.04115433 0.03705325 0.01618253
 0.06158715 0.02560053 0.11985247 0.01884538 0.00846656 0.00846656]
[0.01554244 0.01441005 0.27811885 0.0087582  0.05520061 0.05768918
 0.01554652 0.01600296 0.01689512 0.07647143 0.01861215 0.0094632
 0.01620989 0.01382526 0.03005729 0.05520061 0.03756136 0.01600296
 0.05998696 0.02866773 0.12780546 0.01640201 0.0077849  0.0077849 ]
[0.03054652 0.02671708 0.1755101  0.01566404 0.04981572 0.05094694
 0.02022553 0.025462   0.02748005 0.05251759 0.02643562 0.02177196
 0.02479634 0.02677141 0.03630592 0.04981572 0.04848593 0.025462
 0.05955204 0.03443904 0.10374556 0.03262768 0.01745261 0.01745261]
[0.02016985 0.02181043 0.25642064 0.01160409 0.05109885 0.06392744
 0.01911488 0.01969566 0.01860141 0.07209803 0.016031   0.01520737
 0.02291358 0.01609497 0.03321457 0.05109885 0.04221573 0.01969566
 0.05807943 0.0274545  0.10080639 0.02401659 0.00931502 0.00931502]
[0.0210779  0.02463635 0.32569432 0.0092406  0.04508504 0.0475288
 0.01423003 0.01301628 0.01521358 0.06469845 0.01649505 0.01105584
 0.02013514 0.01453327 0.02847353 0.04508504 0.03825399 0.01301628
 0.0502763  0.02718882 0.11754461 0.01895921 0.00928079 0.00928079]
[0.03468531 0.02832709 0.13297206 0.02274158 0.03937269 0.05315707
 0.02564486 0.02881509 0.02907239 0.07681652 0.02557632 0.02908754
 0.02854516 0.0295489  0.03304544 0.03937269 0.04549073 0.02881509
 0.07325833 0.03401339 0.09901144 0.02853571 0.01704732 0.01704732]
[0.01947166 0.01750931 0.22990176 0.0120419  0.05142069 0.06146695
 0.01833093 0.01901971 0.01976142 0.07378833 0.01772046 0.01317289
 0.02164261 0.0211135  0.02988818 0.05142069 0.04302233 0.01901971
 0.06804211 0.03139965 0.11966892 0.02106587 0.01005522 0.01005522]
[0.01303559 0.01128448 0.39375442 0.00439958 0.03950203 0.05984767
 0.00780655 0.0112414  0.00837911 0.07802077 0.02410976 0.00633988
 0.01103521 0.00779337 0.0224272  0.03950203 0.02822465 0.0112414
 0.04723104 0.01497256 0.13745639 0.01125631 0.00556923 0.00556923]
[0.02400545 0.01858991 0.27633005 0.01036879 0.04650848 0.06040125
 0.01288247 0.01787645 0.01632154 0.07646959 0.01956573 0.01452299
 0.01848729 0.0165927  0.02740336 0.04650848 0.03956731 0.01787645
 0.06154046 0.02981023 0.10821282 0.02121096 0.00947362 0.00947362]
[0.0178154  0.01335364 0.26622742 0.00821648 0.0520654  0.06306827
 0.01246511 0.0156563  0.01236185 0.07782289 0.01554154 0.00846609
 0.01768222 0.01232263 0.02395369 0.0520654  0.03739519 0.0156563
 0.06891283 0.02571383 0.1482893  0.01772442 0.00861187 0.00861187]
[0.02312656 0.01843679 0.2192143  0.01188823 0.0594161  0.06765054
 0.01814947 0.02078319 0.01890239 0.07290882 0.01610093 0.01338644
 0.0209358  0.01838255 0.03331371 0.0594161  0.04451605 0.02078319
 0.05534797 0.0323627  0.1089692  0.02826851 0.00887024 0.00887024]
[0.0209583  0.02108004 0.27660647 0.01075177 0.04793055 0.05185447
 0.01401461 0.01781204 0.01506886 0.06667756 0.01891523 0.01479196
 0.02342073 0.0149671  0.03369985 0.04793055 0.04084558 0.01781204
 0.05458779 0.03164832 0.10175823 0.02684692 0.01501049 0.01501049]
[0.02316942 0.0194883  0.22434606 0.00869051 0.05201153 0.05366799
 0.01391975 0.01924756 0.01834041 0.08047924 0.01356487 0.01251671
 0.02163219 0.01532746 0.03323341 0.05201153 0.04764475 0.01924756
 0.06082803 0.03721    0.12672466 0.0235424  0.01157782 0.01157782]
[0.03054652 0.02671708 0.1755101  0.01566404 0.04981572 0.05094694
 0.02022553 0.025462   0.02748005 0.05251759 0.02643562 0.02177196
 0.02479634 0.02677141 0.03630592 0.04981572 0.04848593 0.025462
 0.05955204 0.03443904 0.10374556 0.03262768 0.01745261 0.01745261]
[0.0248567  0.02706576 0.19538267 0.01423245 0.04469308 0.0468416
 0.01678658 0.02173157 0.01995845 0.06641214 0.01881191 0.01791619
 0.02604983 0.01937523 0.03343873 0.04469308 0.05873472 0.02173157
 0.05951288 0.03805292 0.12445153 0.02628481 0.01649276 0.01649276]
[0.03468531 0.02832709 0.13297206 0.02274158 0.03937269 0.05315707
 0.02564486 0.02881509 0.02907239 0.07681652 0.02557632 0.02908754
 0.02854516 0.0295489  0.03304544 0.03937269 0.04549073 0.02881509
 0.07325833 0.03401339 0.09901144 0.02853571 0.01704732 0.01704732]
[0.02075172 0.01806617 0.26633012 0.0128851  0.05199467 0.0461666
 0.01388867 0.01352073 0.02086701 0.07403088 0.01578745 0.01529984
 0.02350641 0.0190535  0.03413591 0.05199467 0.04047627 0.01352073
 0.0475164  0.03331557 0.12056959 0.02216398 0.01207903 0.01207903]
[0.02904731 0.02362457 0.18934165 0.01605127 0.04728438 0.05928022
 0.02302903 0.0203421  0.02234864 0.06833674 0.01947057 0.01640661
 0.0285524  0.02118089 0.03070014 0.04728438 0.04518101 0.0203421
 0.05254849 0.03665726 0.12794375 0.02623696 0.01440476 0.01440476]
[0.02627985 0.0215128  0.16327134 0.01685939 0.04954167 0.05207384
 0.02037612 0.02099792 0.02207276 0.0928461  0.0223752  0.02086693
 0.0220327  0.02109443 0.03610048 0.04954167 0.04704994 0.02099792
 0.06309547 0.03322273 0.11834799 0.03201894 0.01371193 0.01371193]
[0.01594324 0.01739    0.26005736 0.00756772 0.06205054 0.05375823
 0.01504081 0.01422565 0.01199296 0.08717841 0.01263782 0.0096608
 0.02048899 0.01188215 0.02789434 0.06205054 0.03826651 0.01422565
 0.05522212 0.02995325 0.1382454  0.01841573 0.00792591 0.00792591]
[0.02058803 0.0191852  0.18431957 0.01316397 0.05381259 0.08195267
 0.01871041 0.01871485 0.02033352 0.07965203 0.01452406 0.01514091
 0.02329646 0.01773242 0.03509579 0.05381259 0.03919023 0.01871485
 0.07816208 0.03169852 0.11511226 0.02401358 0.01153669 0.01153669]
[0.02058803 0.0191852  0.18431957 0.01316397 0.05381259 0.08195267
 0.01871041 0.01871485 0.02033352 0.07965203 0.01452406 0.01514091
 0.02329646 0.01773242 0.03509579 0.05381259 0.03919023 0.01871485
 0.07816208 0.03169852 0.11511226 0.02401358 0.01153669 0.01153669]]