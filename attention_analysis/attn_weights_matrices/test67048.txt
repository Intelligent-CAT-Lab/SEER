67048
Test: public void testCustomLists() throws Exception { ObjectMapper mapper = new ObjectMapper(); SimpleModule module = new SimpleModule("test", Version.unknownVersion()); JsonSerializer<?> ser = new CollectionSerializer(null, false, null, null, null); final JsonSerializer<Object> collectionSerializer = (JsonSerializer<Object>) ser; module.addSerializer(Collection.class, new JsonSerializer<Collection>() { @Override public void serialize(Collection value, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonProcessingException { if (value.size() != 0) { collectionSerializer.serialize(value, jgen, provider); } else { jgen.writeNull(); } } }); mapper.registerModule(module); }
Code: public void serialize(Object value, JsonGenerator jgen, SerializerProvider provider) throws IOException { String str; if (value instanceof Date) { provider.defaultSerializeDateKey((Date) value, jgen); return; } else { str = value.toString(); } jgen.writeFieldName(str); }
[[0.02566118 0.02142185 0.05900173 0.02411631 0.03312878 0.01760666
 0.08165368 0.04668436 0.05689137 0.01463642 0.0395577  0.03219063
 0.05704226 0.06971265 0.02387025 0.01235778 0.01366917 0.0395577
 0.01160696 0.02411631 0.04427728 0.02658526 0.01210215 0.03380766
 0.0395577  0.01949216 0.01648754 0.02744735 0.01210215 0.05155493
 0.01210215]
[0.01984043 0.01879777 0.05175991 0.01533446 0.02430824 0.01162577
 0.12918504 0.05411384 0.06806228 0.0126943  0.04136677 0.0282379
 0.05707307 0.06706026 0.02135914 0.01410772 0.00915517 0.04136677
 0.00794426 0.01533446 0.04629797 0.02333546 0.01230988 0.03552694
 0.04136676 0.0138498  0.01730127 0.02403543 0.01230987 0.0526292
 0.01230987]
[0.02725647 0.02081615 0.05253071 0.02539786 0.03669541 0.02007385
 0.08499821 0.03900724 0.05314621 0.01766717 0.03117334 0.03745969
 0.04833793 0.06673826 0.02694859 0.01589186 0.01692915 0.03117334
 0.01258461 0.02539786 0.04946896 0.02370722 0.01351195 0.03701625
 0.03117335 0.01748691 0.01475633 0.02726407 0.01351195 0.06836718
 0.01351195]
[0.01547535 0.0128004  0.06444441 0.01651364 0.02401826 0.01174961
 0.11406428 0.04568736 0.06590815 0.01276082 0.05376982 0.02841867
 0.0489426  0.06269009 0.02587265 0.00942244 0.00812985 0.05376982
 0.00713488 0.01651364 0.04579565 0.02278944 0.00876286 0.03143893
 0.0537698  0.01410383 0.01418945 0.02317408 0.00876285 0.07036353
 0.00876285]
[0.02329905 0.01913864 0.07096943 0.01907367 0.02745238 0.01659553
 0.10162648 0.04940554 0.06215809 0.01774866 0.03777368 0.03384109
 0.03988225 0.06756167 0.02147922 0.01329613 0.01234473 0.03777368
 0.01029725 0.01907367 0.04273475 0.02546135 0.01059566 0.03981132
 0.03777369 0.01418826 0.0173027  0.02193996 0.01059565 0.06821011
 0.01059565]
[0.02185552 0.01875402 0.06221688 0.01846913 0.0276472  0.01522324
 0.10701204 0.04340507 0.06414546 0.01365231 0.04114664 0.03772714
 0.03949412 0.07401426 0.02796964 0.01530984 0.00866475 0.04114664
 0.0095208  0.01846913 0.03848901 0.02456705 0.01051137 0.03004435
 0.04114663 0.01646112 0.01782046 0.02725103 0.01051138 0.06684244
 0.01051138]
[0.0191517  0.01497416 0.06791259 0.02430034 0.03181984 0.01455278
 0.10734083 0.04117195 0.06210156 0.01442237 0.04178365 0.03064771
 0.04821206 0.05769992 0.02316551 0.01242033 0.00880423 0.04178365
 0.00834074 0.02430034 0.04419453 0.02672728 0.01252859 0.03666304
 0.04178367 0.0140066  0.01745613 0.02003244 0.01252859 0.06664422
 0.01252859]
[0.02071327 0.01545636 0.07219559 0.02034296 0.02791853 0.01393752
 0.11899307 0.03885657 0.07548881 0.01266049 0.03715492 0.02950141
 0.0540733  0.0661088  0.02454259 0.015715   0.00978243 0.03715492
 0.00876987 0.02034296 0.0359675  0.02481317 0.00897847 0.03866593
 0.03715492 0.01565733 0.01752871 0.02422935 0.00897847 0.05933836
 0.00897847]
[0.01693654 0.01714737 0.05398109 0.02010423 0.02690073 0.01074441
 0.12765688 0.04315491 0.07729007 0.01180665 0.04610567 0.02953213
 0.04427065 0.07561231 0.02064253 0.01102532 0.00798876 0.04610567
 0.00909783 0.02010423 0.0464106  0.02092473 0.00867986 0.03951846
 0.04610569 0.01272585 0.01531131 0.01898786 0.00867986 0.05776796
 0.00867986]
[0.01965816 0.01589803 0.05779893 0.01917953 0.02981344 0.01275398
 0.11401253 0.04776815 0.07424499 0.01252827 0.0411955  0.03384828
 0.04532834 0.08373798 0.01924571 0.01501037 0.01009924 0.0411955
 0.00878587 0.01917953 0.0413409  0.02479917 0.00828554 0.038342
 0.04119551 0.01247788 0.01595055 0.02575239 0.00828554 0.05400262
 0.00828554]
[0.02504873 0.02209543 0.06294127 0.02767898 0.03670081 0.01914493
 0.08147385 0.04310798 0.04367765 0.0172756  0.04298681 0.03474398
 0.04744744 0.04278432 0.02686116 0.01880069 0.01591448 0.04298681
 0.01186276 0.02767898 0.04169163 0.02643228 0.01472402 0.03808727
 0.04298682 0.01463384 0.02097606 0.02837804 0.01472402 0.05142923
 0.01472402]
[0.02520255 0.0186553  0.06308525 0.02270379 0.032133   0.01638416
 0.1015394  0.04739059 0.06671508 0.01528429 0.04134963 0.02841736
 0.04079878 0.0730335  0.02370489 0.01625601 0.01297285 0.04134963
 0.01074588 0.02270379 0.0319555  0.02411347 0.01023188 0.03713889
 0.04134965 0.0192494  0.01692426 0.02566586 0.01023188 0.05248157
 0.01023188]
[0.0199072  0.01757758 0.05790098 0.01799085 0.03274631 0.0162583
 0.11140563 0.04297706 0.06657717 0.01546159 0.0393251  0.03418523
 0.04913975 0.06280804 0.02708873 0.01417944 0.01063367 0.0393251
 0.01001731 0.01799085 0.03753915 0.02253924 0.01093868 0.03821304
 0.03932508 0.01772901 0.01736777 0.02637341 0.01093868 0.06460131
 0.01093868]
[0.01507579 0.01227103 0.06940617 0.01353346 0.01893426 0.01034765
 0.14678214 0.0378866  0.08608945 0.01134143 0.03927607 0.03065073
 0.04321231 0.087837   0.02021231 0.01114183 0.00448397 0.03927607
 0.00541784 0.01353346 0.0384662  0.02384878 0.00571444 0.04741325
 0.03927606 0.01067399 0.01244971 0.02129787 0.00571443 0.07272131
 0.00571443]
[0.02187294 0.01821631 0.07505807 0.01782973 0.02897584 0.01946962
 0.08161636 0.0443089  0.05377699 0.01600436 0.04059622 0.03625495
 0.0568565  0.06758142 0.02789441 0.01519272 0.01289847 0.04059622
 0.01094325 0.01782973 0.0434652  0.0209853  0.01031719 0.03492622
 0.04059624 0.01812443 0.01774571 0.02415103 0.01031719 0.06528129
 0.01031719]
[0.01945532 0.01817816 0.06171077 0.02318678 0.0326912  0.01850533
 0.08674913 0.04350059 0.06626864 0.01459583 0.03996647 0.03804884
 0.04410982 0.066532   0.02792314 0.01301223 0.01161033 0.03996647
 0.00688795 0.02318678 0.04572356 0.02014409 0.01146304 0.04513713
 0.03996646 0.01505014 0.01553447 0.0252333  0.01146304 0.062736
 0.01146304]
[0.01817664 0.01590553 0.06705339 0.02065365 0.02757023 0.01173573
 0.1228951  0.04661619 0.05779499 0.0148713  0.05157745 0.03217671
 0.04055561 0.05537876 0.025689   0.01069219 0.00851943 0.05157745
 0.0079249  0.02065365 0.04338067 0.02128899 0.00977451 0.03754
 0.05157747 0.01465476 0.01835061 0.02360044 0.00977451 0.05226564
 0.00977451]
[0.02504873 0.02209543 0.06294127 0.02767898 0.03670081 0.01914493
 0.08147385 0.04310798 0.04367765 0.0172756  0.04298681 0.03474398
 0.04744744 0.04278432 0.02686116 0.01880069 0.01591448 0.04298681
 0.01186276 0.02767898 0.04169163 0.02643228 0.01472402 0.03808727
 0.04298682 0.01463384 0.02097606 0.02837804 0.01472402 0.05142923
 0.01472402]
[0.021026   0.01751353 0.08009966 0.02451671 0.02676555 0.01608238
 0.08308957 0.0502457  0.06478983 0.01442971 0.03744938 0.03297702
 0.05176592 0.07059374 0.02561805 0.01436456 0.00823184 0.03744938
 0.011477   0.02451671 0.03640629 0.02501685 0.00928268 0.04817529
 0.03744939 0.0164938  0.01707945 0.02472476 0.00928268 0.05380386
 0.00928268]
[0.01547535 0.0128004  0.06444441 0.01651364 0.02401826 0.01174961
 0.11406428 0.04568736 0.06590815 0.01276082 0.05376982 0.02841867
 0.0489426  0.06269009 0.02587265 0.00942244 0.00812985 0.05376982
 0.00713488 0.01651364 0.04579565 0.02278944 0.00876286 0.03143893
 0.0537698  0.01410383 0.01418945 0.02317408 0.00876285 0.07036353
 0.00876285]
[0.01880375 0.01649868 0.06095752 0.01864986 0.02513513 0.01551675
 0.12208773 0.04212528 0.05504701 0.01456907 0.04522709 0.03579509
 0.05358886 0.06555079 0.02503243 0.01218912 0.00997817 0.04522709
 0.00881665 0.01864986 0.05087815 0.01936889 0.00697355 0.03207887
 0.04522707 0.01532477 0.01478177 0.02485588 0.00697355 0.06711799
 0.00697355]
[0.0182295  0.01343582 0.06782199 0.01696134 0.02377762 0.01207571
 0.1075601  0.04710978 0.06890711 0.01367457 0.04081201 0.03677854
 0.04551843 0.07673518 0.02541995 0.01419469 0.01033149 0.04081201
 0.01000496 0.01696134 0.04337633 0.02458277 0.00907199 0.03252546
 0.040812   0.01521994 0.01472729 0.02595649 0.00907199 0.06846152
 0.00907199]
[0.01664373 0.01603064 0.06016679 0.0172576  0.02204539 0.01135218
 0.1118517  0.04143266 0.06964273 0.01450914 0.04876184 0.03044135
 0.04719762 0.06554588 0.03006802 0.01195994 0.00980307 0.04876184
 0.01133827 0.0172576  0.04318368 0.02043724 0.01020467 0.0364619
 0.04876185 0.02030411 0.01570063 0.02854569 0.01020467 0.05392291
 0.01020467]
[0.0201009  0.01565088 0.06239208 0.01828547 0.0304452  0.01610619
 0.09713002 0.05936642 0.06731553 0.01349273 0.04248085 0.03458261
 0.05657014 0.06450012 0.02784577 0.01204222 0.00854551 0.04248085
 0.00848225 0.01828547 0.04064769 0.01983432 0.00862175 0.03754097
 0.04248085 0.01223734 0.0145125  0.02764003 0.00862175 0.06313995
 0.00862175]
[0.02504873 0.02209543 0.06294127 0.02767898 0.03670081 0.01914493
 0.08147385 0.04310798 0.04367765 0.0172756  0.04298681 0.03474398
 0.04744744 0.04278432 0.02686116 0.01880069 0.01591448 0.04298681
 0.01186276 0.02767898 0.04169163 0.02643228 0.01472402 0.03808727
 0.04298682 0.01463384 0.02097606 0.02837804 0.01472402 0.05142923
 0.01472402]
[0.016545   0.0167387  0.08094876 0.02057641 0.02592012 0.01231043
 0.0969243  0.0446076  0.0650619  0.01444236 0.04738477 0.02524056
 0.04634563 0.06958555 0.02766639 0.00963212 0.00966434 0.04738477
 0.00804142 0.02057641 0.04138169 0.02278439 0.00952811 0.04350169
 0.04738477 0.01456001 0.01325254 0.02383529 0.00952811 0.05911774
 0.00952811]
[0.02915515 0.02426122 0.05346451 0.02684112 0.0350503  0.02234275
 0.07073522 0.04760448 0.04450732 0.019548   0.03532042 0.03420833
 0.03855952 0.06500822 0.02316621 0.01729529 0.02096994 0.03532042
 0.01507821 0.02684112 0.04313519 0.03250497 0.01486585 0.03435422
 0.03532042 0.01642892 0.0248615  0.033563   0.01486585 0.04995646
 0.01486585]
[0.02118701 0.01762442 0.07022566 0.01929219 0.03023426 0.01351945
 0.12620969 0.04141913 0.06028242 0.01123593 0.03692849 0.02819683
 0.04853699 0.07199834 0.02130384 0.01489772 0.00939553 0.03692849
 0.00815241 0.01929219 0.04814317 0.02715838 0.00903236 0.04030902
 0.03692848 0.01357318 0.01603486 0.02067761 0.00903236 0.06321718
 0.00903236]
[0.01664373 0.01603064 0.06016681 0.0172576  0.02204539 0.01135218
 0.11185166 0.04143268 0.06964272 0.01450914 0.04876184 0.03044135
 0.04719761 0.06554587 0.03006801 0.01195994 0.00980307 0.04876184
 0.01133826 0.0172576  0.04318367 0.02043724 0.01020467 0.0364619
 0.04876184 0.02030411 0.01570063 0.02854569 0.01020467 0.05392291
 0.01020467]
[0.01951815 0.01454908 0.06132456 0.02198923 0.03137648 0.01359427
 0.11978377 0.04513977 0.08443131 0.01135066 0.04227632 0.02955567
 0.04819723 0.06796248 0.02211482 0.01088234 0.00883556 0.04227632
 0.00829323 0.02198923 0.04510004 0.02040087 0.00782527 0.03455885
 0.04227632 0.01503116 0.01399343 0.02218776 0.00782527 0.05753524
 0.00782527]
[0.01664373 0.01603064 0.06016681 0.0172576  0.02204539 0.01135218
 0.11185166 0.04143268 0.06964272 0.01450914 0.04876184 0.03044135
 0.04719761 0.06554587 0.03006801 0.01195994 0.00980307 0.04876184
 0.01133826 0.0172576  0.04318367 0.02043724 0.01020467 0.0364619
 0.04876184 0.02030411 0.01570063 0.02854569 0.01020467 0.05392291
 0.01020467]]