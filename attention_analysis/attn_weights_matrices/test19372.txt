19372
Test: public void testMultipleDefinition() throws Exception { checkDefinitionsInJs( "a = 1; a = 2; a", ImmutableSet.of("DEF NAME a -> NUMBER", "USE NAME a -> [NUMBER x 2]")); checkDefinitionsInJs( "a = 1; a = 'a'; a", ImmutableSet.of("DEF NAME a -> NUMBER", "DEF NAME a -> STRING", "USE NAME a -> [NUMBER, STRING]")); checkDefinitionsInJs( "a = 1; b = 2; a = b; a", ImmutableSet.of("DEF NAME a -> <null>", "DEF NAME a -> NUMBER", "DEF NAME b -> NUMBER", "USE NAME a -> [<null>, NUMBER]", "USE NAME b -> [NUMBER]")); checkDefinitionsInJs( "a = 1; b = 2; c = b; c = a; c", ImmutableSet.of("DEF NAME a -> NUMBER", "DEF NAME b -> NUMBER", "DEF NAME c -> <null>", "USE NAME a -> [NUMBER]", "USE NAME b -> [NUMBER]", "USE NAME c -> [<null> x 2]")); checkDefinitionsInJs( "function f(){} f()", ImmutableSet.of("DEF NAME f -> FUNCTION", "USE NAME f -> [FUNCTION]")); checkDefinitionsInJs( "function f(){} f.call(null)", ImmutableSet.of("DEF NAME f -> FUNCTION", "USE NAME f -> [FUNCTION]", "USE GETPROP f.call -> [FUNCTION]")); checkDefinitionsInJs( "function f(){} f.apply(null, [])", ImmutableSet.of("DEF NAME f -> FUNCTION", "USE NAME f -> [FUNCTION]", "USE GETPROP f.apply -> [FUNCTION]")); checkDefinitionsInJs( "function f(){} f.foobar()", ImmutableSet.of("DEF NAME f -> FUNCTION", "USE NAME f -> [FUNCTION]")); checkDefinitionsInJs( "function f(){} f(); f.call(null)", ImmutableSet.of("DEF NAME f -> FUNCTION", "USE NAME f -> [FUNCTION]", "USE GETPROP f.call -> [FUNCTION]")); }
Code: public Result call() throws Exception { compileInternal(); return getResult(); }
tensor([[0.0801, 0.0624, 0.1972, 0.1862, 0.0638, 0.1116, 0.0913, 0.0887, 0.0835,
         0.0352],
        [0.0620, 0.0531, 0.1929, 0.2124, 0.0433, 0.1626, 0.0788, 0.0830, 0.0860,
         0.0258],
        [0.0745, 0.0757, 0.1906, 0.1794, 0.0443, 0.1198, 0.0739, 0.1054, 0.1046,
         0.0318],
        [0.0529, 0.0528, 0.1943, 0.2642, 0.0414, 0.1212, 0.0765, 0.0852, 0.0874,
         0.0241],
        [0.0559, 0.0568, 0.2513, 0.1906, 0.0476, 0.1246, 0.0810, 0.0759, 0.0888,
         0.0274],
        [0.0869, 0.0826, 0.1550, 0.1565, 0.0545, 0.1266, 0.0877, 0.1017, 0.1017,
         0.0467],
        [0.0588, 0.0654, 0.1594, 0.2416, 0.0480, 0.1199, 0.0820, 0.0980, 0.1036,
         0.0234],
        [0.0547, 0.0669, 0.2276, 0.2050, 0.0434, 0.1067, 0.0880, 0.0794, 0.0990,
         0.0292],
        [0.0677, 0.0679, 0.1570, 0.2190, 0.0496, 0.1458, 0.0731, 0.1018, 0.0919,
         0.0263],
        [0.0538, 0.0625, 0.1675, 0.2277, 0.0533, 0.1254, 0.0853, 0.1138, 0.0830,
         0.0276]])