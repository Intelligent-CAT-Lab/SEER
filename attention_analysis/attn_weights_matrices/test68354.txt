68354
Test: @Test public void createsFormData() { String html = "<form><input name='one' value='two'><select name='three'><option value='not'>" + "<option value='four' selected><option value='five' selected><textarea name=six>seven</textarea>" + "<input name='seven' type='radio' value='on' checked><input name='seven' type='radio' value='off'>" + "<input name='eight' type='checkbox' checked><input name='nine' type='checkbox' value='unset'>" + "<input name='ten' value='text' disabled>" + "<input name='eleven' value='text' type='button'>" + "</form>"; Document doc = Jsoup.parse(html); FormElement form = (FormElement) doc.select("form").first(); List<Connection.KeyVal> data = form.formData(); }
Code: public List<Connection.KeyVal> formData() { ArrayList<Connection.KeyVal> data = new ArrayList<>(); for (Element el: elements) { if (!el.tag().isFormSubmittable()) continue; if (el.hasAttr("disabled")) continue; String name = el.attr("name"); if (name.length() == 0) continue; String type = el.attr("type"); if (type.equalsIgnoreCase("button")) continue; if ("select".equals(el.normalName())) { Elements options = el.select("option[selected]"); boolean set = false; for (Element option: options) { data.add(HttpConnection.KeyVal.create(name, option.val())); set = true; } if (!set) { Element option = el.select("option").first(); if (option != null) data.add(HttpConnection.KeyVal.create(name, option.val())); } } else if ("checkbox".equalsIgnoreCase(type) || "radio".equalsIgnoreCase(type)) { if (el.hasAttr("checked")) { final String val = el.val().length() > 0 ? el.val() : "on"; data.add(HttpConnection.KeyVal.create(name, val)); } } else { data.add(HttpConnection.KeyVal.create(name, el.val())); } } return data; }
tensor([[0.0070, 0.0030, 0.0146,  ..., 0.0078, 0.0400, 0.0031],
        [0.0057, 0.0031, 0.0144,  ..., 0.0070, 0.0494, 0.0029],
        [0.0046, 0.0028, 0.0164,  ..., 0.0081, 0.0569, 0.0018],
        ...,
        [0.0046, 0.0029, 0.0126,  ..., 0.0066, 0.0624, 0.0025],
        [0.0066, 0.0030, 0.0107,  ..., 0.0067, 0.0574, 0.0021],
        [0.0049, 0.0028, 0.0161,  ..., 0.0106, 0.0356, 0.0026]])