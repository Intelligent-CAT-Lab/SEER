67390
Test: public void testCustomLists() throws Exception { ObjectMapper mapper = new ObjectMapper(); SimpleModule module = new SimpleModule("test", Version.unknownVersion()); JsonSerializer<?> ser = new CollectionSerializer(null, false, null, null); final JsonSerializer<Object> collectionSerializer = (JsonSerializer<Object>) ser; module.addSerializer(Collection.class, new JsonSerializer<Collection>() { @Override public void serialize(Collection value, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonProcessingException { if (value.size() != 0) { collectionSerializer.serialize(value, jgen, provider); } else { jgen.writeNull(); } } }); mapper.registerModule(module); }
Code: public void serialize(Object value, JsonGenerator g, SerializerProvider provider){switch (_typeId) {case TYPE_DATE:provider.defaultSerializeDateKey((Date)value, g);break;case TYPE_CALENDAR:provider.defaultSerializeDateKey(((Calendar) value).getTimeInMillis(), g);break;case TYPE_CLASS:;break;case TYPE_ENUM:{String str = provider.isEnabled(SerializationFeature.WRITE_ENUMS_USING_TO_STRING)? value.toString() : ((Enum<?>) value).name();;}break;case TYPE_TO_STRING:default:g.writeFieldName(value.toString());}}
tensor([[0.0280, 0.0238, 0.0671, 0.0258, 0.0356, 0.0295, 0.0838, 0.0257, 0.0463,
         0.0755, 0.0272, 0.0120, 0.0441, 0.0527, 0.0120, 0.0138, 0.0229, 0.0200,
         0.0182, 0.1386, 0.0926, 0.0296, 0.0336, 0.0170, 0.0247],
        [0.0217, 0.0224, 0.0632, 0.0167, 0.0256, 0.0259, 0.1166, 0.0166, 0.0377,
         0.0652, 0.0175, 0.0087, 0.0407, 0.0597, 0.0087, 0.0092, 0.0213, 0.0127,
         0.0204, 0.2233, 0.0765, 0.0238, 0.0284, 0.0155, 0.0223],
        [0.0313, 0.0245, 0.0624, 0.0276, 0.0412, 0.0329, 0.0876, 0.0181, 0.0376,
         0.0761, 0.0305, 0.0141, 0.0358, 0.0499, 0.0141, 0.0151, 0.0285, 0.0186,
         0.0172, 0.1561, 0.0798, 0.0234, 0.0313, 0.0210, 0.0254],
        [0.0178, 0.0155, 0.0797, 0.0191, 0.0279, 0.0305, 0.1175, 0.0166, 0.0364,
         0.0672, 0.0223, 0.0103, 0.0423, 0.0469, 0.0103, 0.0125, 0.0185, 0.0149,
         0.0169, 0.1757, 0.1094, 0.0198, 0.0316, 0.0156, 0.0249],
        [0.0251, 0.0213, 0.0815, 0.0203, 0.0288, 0.0226, 0.0974, 0.0221, 0.0405,
         0.0721, 0.0255, 0.0103, 0.0392, 0.0500, 0.0103, 0.0133, 0.0203, 0.0140,
         0.0188, 0.1880, 0.0830, 0.0219, 0.0328, 0.0158, 0.0249],
        [0.0168, 0.0205, 0.0631, 0.0233, 0.0267, 0.0239, 0.1015, 0.0211, 0.0374,
         0.0886, 0.0289, 0.0102, 0.0543, 0.0549, 0.0102, 0.0118, 0.0256, 0.0153,
         0.0167, 0.1701, 0.0870, 0.0294, 0.0254, 0.0154, 0.0218],
        [0.0209, 0.0173, 0.0799, 0.0242, 0.0325, 0.0309, 0.0952, 0.0158, 0.0347,
         0.0980, 0.0173, 0.0089, 0.0412, 0.0476, 0.0089, 0.0098, 0.0180, 0.0128,
         0.0197, 0.1968, 0.0818, 0.0188, 0.0270, 0.0158, 0.0260],
        [0.0242, 0.0229, 0.0855, 0.0227, 0.0338, 0.0292, 0.0870, 0.0201, 0.0389,
         0.0790, 0.0245, 0.0112, 0.0385, 0.0608, 0.0112, 0.0100, 0.0225, 0.0149,
         0.0179, 0.1782, 0.0698, 0.0224, 0.0298, 0.0156, 0.0293],
        [0.0178, 0.0156, 0.0962, 0.0193, 0.0268, 0.0197, 0.1208, 0.0144, 0.0378,
         0.0836, 0.0199, 0.0070, 0.0427, 0.0536, 0.0070, 0.0071, 0.0179, 0.0144,
         0.0142, 0.1903, 0.0896, 0.0214, 0.0275, 0.0115, 0.0239],
        [0.0214, 0.0182, 0.0997, 0.0264, 0.0304, 0.0213, 0.0982, 0.0204, 0.0437,
         0.0859, 0.0225, 0.0098, 0.0478, 0.0514, 0.0098, 0.0091, 0.0186, 0.0173,
         0.0180, 0.1720, 0.0719, 0.0189, 0.0247, 0.0150, 0.0277],
        [0.0256, 0.0244, 0.0613, 0.0253, 0.0333, 0.0302, 0.1039, 0.0184, 0.0418,
         0.0601, 0.0245, 0.0142, 0.0361, 0.0503, 0.0142, 0.0155, 0.0211, 0.0195,
         0.0232, 0.1816, 0.0806, 0.0204, 0.0332, 0.0153, 0.0260],
        [0.0325, 0.0223, 0.0682, 0.0260, 0.0365, 0.0267, 0.0845, 0.0214, 0.0476,
         0.0654, 0.0279, 0.0146, 0.0553, 0.0517, 0.0146, 0.0160, 0.0180, 0.0206,
         0.0196, 0.1545, 0.0742, 0.0227, 0.0327, 0.0203, 0.0261],
        [0.0250, 0.0219, 0.0741, 0.0240, 0.0365, 0.0387, 0.0992, 0.0201, 0.0362,
         0.0712, 0.0263, 0.0121, 0.0474, 0.0488, 0.0121, 0.0125, 0.0228, 0.0190,
         0.0217, 0.1498, 0.0848, 0.0203, 0.0286, 0.0190, 0.0278],
        [0.0230, 0.0244, 0.0639, 0.0235, 0.0365, 0.0305, 0.0814, 0.0185, 0.0427,
         0.0845, 0.0284, 0.0134, 0.0454, 0.0578, 0.0134, 0.0124, 0.0201, 0.0148,
         0.0207, 0.1647, 0.0888, 0.0180, 0.0291, 0.0207, 0.0233],
        [0.0325, 0.0223, 0.0682, 0.0260, 0.0365, 0.0267, 0.0845, 0.0214, 0.0476,
         0.0654, 0.0279, 0.0146, 0.0553, 0.0517, 0.0146, 0.0160, 0.0180, 0.0206,
         0.0196, 0.1545, 0.0742, 0.0227, 0.0327, 0.0203, 0.0261],
        [0.0225, 0.0166, 0.0765, 0.0206, 0.0282, 0.0237, 0.1079, 0.0178, 0.0422,
         0.0735, 0.0223, 0.0098, 0.0454, 0.0533, 0.0098, 0.0121, 0.0192, 0.0156,
         0.0174, 0.1918, 0.0892, 0.0186, 0.0292, 0.0151, 0.0216],
        [0.0224, 0.0234, 0.0595, 0.0235, 0.0310, 0.0301, 0.0937, 0.0184, 0.0397,
         0.0808, 0.0226, 0.0139, 0.0437, 0.0549, 0.0139, 0.0151, 0.0232, 0.0209,
         0.0202, 0.1650, 0.0801, 0.0271, 0.0294, 0.0207, 0.0264],
        [0.0191, 0.0200, 0.1019, 0.0217, 0.0280, 0.0298, 0.0928, 0.0158, 0.0339,
         0.0894, 0.0190, 0.0097, 0.0414, 0.0464, 0.0097, 0.0105, 0.0167, 0.0142,
         0.0151, 0.1776, 0.0973, 0.0228, 0.0261, 0.0162, 0.0249],
        [0.0334, 0.0281, 0.0627, 0.0304, 0.0402, 0.0367, 0.0790, 0.0252, 0.0504,
         0.0492, 0.0297, 0.0211, 0.0442, 0.0487, 0.0211, 0.0212, 0.0262, 0.0184,
         0.0289, 0.1130, 0.0645, 0.0300, 0.0374, 0.0278, 0.0324],
        [0.0254, 0.0181, 0.0711, 0.0201, 0.0265, 0.0351, 0.0946, 0.0176, 0.0330,
         0.0877, 0.0216, 0.0100, 0.0426, 0.0597, 0.0100, 0.0102, 0.0185, 0.0136,
         0.0135, 0.1902, 0.0833, 0.0258, 0.0306, 0.0160, 0.0250],
        [0.0203, 0.0168, 0.0769, 0.0240, 0.0343, 0.0204, 0.1215, 0.0177, 0.0405,
         0.0618, 0.0262, 0.0114, 0.0430, 0.0399, 0.0114, 0.0114, 0.0182, 0.0164,
         0.0195, 0.1563, 0.1198, 0.0235, 0.0317, 0.0147, 0.0226],
        [0.0291, 0.0236, 0.0815, 0.0205, 0.0304, 0.0357, 0.0880, 0.0229, 0.0502,
         0.0595, 0.0247, 0.0127, 0.0385, 0.0506, 0.0127, 0.0141, 0.0214, 0.0238,
         0.0234, 0.1488, 0.0803, 0.0217, 0.0348, 0.0196, 0.0314],
        [0.0218, 0.0184, 0.0758, 0.0240, 0.0284, 0.0291, 0.1020, 0.0183, 0.0414,
         0.0675, 0.0252, 0.0107, 0.0438, 0.0535, 0.0107, 0.0110, 0.0202, 0.0148,
         0.0162, 0.1742, 0.0954, 0.0282, 0.0317, 0.0144, 0.0234],
        [0.0212, 0.0142, 0.0877, 0.0168, 0.0273, 0.0242, 0.1091, 0.0140, 0.0308,
         0.0722, 0.0224, 0.0095, 0.0465, 0.0529, 0.0095, 0.0085, 0.0194, 0.0135,
         0.0129, 0.2071, 0.1045, 0.0183, 0.0247, 0.0126, 0.0202],
        [0.0218, 0.0173, 0.0854, 0.0227, 0.0319, 0.0190, 0.1107, 0.0168, 0.0338,
         0.0748, 0.0240, 0.0090, 0.0453, 0.0484, 0.0090, 0.0102, 0.0172, 0.0125,
         0.0181, 0.1982, 0.0857, 0.0213, 0.0281, 0.0164, 0.0224]])