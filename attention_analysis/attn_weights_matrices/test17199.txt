17199
Test: public void testRecordTypeSubtypingWithInferredProperties() { RecordTypeBuilder builder = new RecordTypeBuilder(registry); builder.addProperty("a", googSubBarInst, null); JSType record = builder.build(); ObjectType subtypeProp = registry.createAnonymousObjectType(); subtypeProp.defineInferredProperty("a", googSubSubBarInst, null); ObjectType supertypeProp = registry.createAnonymousObjectType(); supertypeProp.defineInferredProperty("a", googBarInst, null); ObjectType declaredSubtypeProp = registry.createAnonymousObjectType(); declaredSubtypeProp.defineDeclaredProperty("a", googSubSubBarInst, null); }
Code: public final boolean defineDeclaredProperty(String propertyName, JSType type, Node propertyNode) { boolean result = defineProperty(propertyName, type, false, propertyNode); registry.registerPropertyOnType(propertyName, this); return result; }
[[0.02796487 0.02361606 0.06090467 0.04029449 0.07751442 0.06168304
 0.02856262 0.060729   0.04912972 0.04615837 0.06090467 0.02045371
 0.01816233 0.04953321 0.02856262 0.02858577 0.04648396 0.09329821
 0.08193673 0.03187197 0.04979373 0.0138558 ]
[0.0275206  0.01921357 0.06449898 0.0350108  0.07608932 0.05846783
 0.03160959 0.06364971 0.03027719 0.05455345 0.06449898 0.02005021
 0.02115357 0.05150401 0.03160959 0.02054342 0.04837987 0.11386964
 0.07703453 0.04023861 0.03988214 0.01034439]
[0.01859956 0.02009531 0.07717194 0.03191051 0.06896292 0.07174316
 0.02370699 0.070939   0.03293573 0.0588133  0.07717194 0.01663572
 0.01477332 0.05633921 0.02370699 0.0201897  0.04065993 0.13321519
 0.05635827 0.03453292 0.04106982 0.01046862]
[0.02589335 0.02208545 0.07278772 0.04152947 0.06648959 0.05975809
 0.03006177 0.05559396 0.03721976 0.05330836 0.07278772 0.01870816
 0.01895364 0.04398451 0.03006177 0.0219374  0.05129562 0.0999667
 0.07429033 0.03576678 0.05247713 0.01504275]
[0.01995405 0.02070735 0.0753354  0.03852    0.06270554 0.06416671
 0.02897047 0.06697598 0.03424964 0.04936001 0.0753354  0.01840063
 0.01746966 0.05494265 0.02897047 0.02196325 0.04935962 0.11093973
 0.07123946 0.03224833 0.04412808 0.01405761]
[0.01851173 0.01784911 0.07196084 0.03950589 0.05699546 0.06846354
 0.02989586 0.05492049 0.03205231 0.05048674 0.07196084 0.01874621
 0.0195635  0.05223355 0.02989586 0.02445411 0.05554535 0.09579422
 0.08537012 0.03147223 0.06328511 0.01103685]
[0.01894744 0.01708176 0.07402571 0.03468505 0.07181042 0.06536351
 0.03081815 0.06830116 0.02801343 0.06123163 0.07402571 0.01782912
 0.01494661 0.05639566 0.03081815 0.02109551 0.05003074 0.0820736
 0.08132973 0.03132857 0.06183673 0.00801164]
[0.01943284 0.01540794 0.07260378 0.03469374 0.05687001 0.07707946
 0.03037196 0.06605856 0.02693892 0.05520578 0.07260378 0.01928536
 0.01987598 0.04073703 0.03037196 0.01971795 0.05739659 0.12116484
 0.07457909 0.0306367  0.04922359 0.00974422]
[0.01975166 0.01941113 0.07417637 0.03366376 0.06236006 0.07891781
 0.02884176 0.06192658 0.03146712 0.05160112 0.07417637 0.01688578
 0.01535    0.06127464 0.02884176 0.02158448 0.05726316 0.10870136
 0.06462888 0.03081261 0.0467231  0.01164043]
[0.03111012 0.03083356 0.0598456  0.03755932 0.06982421 0.03953775
 0.03457797 0.05416567 0.04374011 0.05725892 0.0598456  0.02073054
 0.02622711 0.06121217 0.03457797 0.02498414 0.0535339  0.0744139
 0.07586023 0.03485737 0.0562697  0.01903412]
[0.01859956 0.02009531 0.07717194 0.03191051 0.06896292 0.07174316
 0.02370699 0.070939   0.03293573 0.0588133  0.07717194 0.01663572
 0.01477332 0.05633921 0.02370699 0.0201897  0.04065993 0.13321519
 0.05635827 0.03453292 0.04106982 0.01046862]
[0.03104269 0.02274307 0.07136726 0.03308842 0.05582578 0.05435429
 0.02690431 0.06646392 0.02870654 0.05412954 0.07136726 0.02047099
 0.01603073 0.04802833 0.02690431 0.01893831 0.04440038 0.15119782
 0.06468935 0.03297114 0.04807024 0.01230538]
[0.03426242 0.02900302 0.06506459 0.03884812 0.06482771 0.04897492
 0.03912884 0.05591614 0.04807954 0.04276809 0.06506459 0.02096732
 0.02957949 0.04398637 0.03912884 0.02664532 0.05022445 0.05937916
 0.08134504 0.03837968 0.06065249 0.01777387]
[0.02346979 0.02635825 0.07747668 0.04269188 0.06489042 0.05294301
 0.02927325 0.05836176 0.03173821 0.05372778 0.07747668 0.01726237
 0.01665947 0.04115903 0.02927325 0.02321535 0.05556179 0.09960194
 0.08838819 0.02791028 0.05043922 0.01212137]
[0.01894744 0.01708176 0.07402571 0.03468505 0.07181042 0.06536351
 0.03081815 0.06830116 0.02801343 0.06123163 0.07402571 0.01782912
 0.01494661 0.05639566 0.03081815 0.02109551 0.05003074 0.0820736
 0.08132973 0.03132857 0.06183673 0.00801164]
[0.01888231 0.01907049 0.07594113 0.03743584 0.06646146 0.06667565
 0.03361088 0.06598163 0.02941604 0.06010818 0.07594113 0.01652662
 0.01332994 0.05100867 0.03361088 0.01863549 0.0460537  0.11792088
 0.06668599 0.03170808 0.04690908 0.008086  ]
[0.0224629  0.0276526  0.07269    0.03876061 0.0677868  0.06438565
 0.02566351 0.05381108 0.03017324 0.05318301 0.07269    0.02159929
 0.01807214 0.05025782 0.02566351 0.02076617 0.05125634 0.09111051
 0.09346341 0.02831823 0.05732729 0.01290591]
[0.01785976 0.02385222 0.06329102 0.03642535 0.07599404 0.06913948
 0.02958453 0.06868963 0.02630301 0.03221399 0.06329102 0.01545265
 0.01817614 0.05802214 0.02958453 0.0273066  0.05537254 0.12160756
 0.07044354 0.0316247  0.05333776 0.01242777]
[0.02354915 0.02158283 0.09119093 0.03545227 0.06748601 0.05149404
 0.03356795 0.05461218 0.03416058 0.05212278 0.09119093 0.01713395
 0.01737236 0.04464627 0.03356795 0.01997738 0.04341637 0.09466162
 0.08200856 0.02670173 0.05340238 0.01070183]
[0.01880718 0.01832336 0.07215098 0.03546252 0.07037402 0.06379777
 0.02481213 0.04947559 0.03475957 0.04468312 0.07215098 0.02038518
 0.01886959 0.04847433 0.02481213 0.01870203 0.05766828 0.13019617
 0.08579326 0.02594691 0.05251114 0.01184374]
[0.02449128 0.02313377 0.07326229 0.04020234 0.06944487 0.05041598
 0.03486257 0.06564279 0.03737985 0.05492875 0.07326229 0.02006451
 0.01756624 0.04718013 0.03486257 0.01980484 0.057222   0.08362202
 0.07446247 0.03615897 0.05127207 0.01075742]
[0.01917058 0.01811838 0.06056977 0.03862739 0.06026725 0.06035003
 0.02932551 0.08575608 0.03493122 0.05949981 0.06056977 0.01532073
 0.01844653 0.04968359 0.02932551 0.02551412 0.05293456 0.09946196
 0.08423471 0.04482706 0.04075461 0.01231086]]