66531
Test: public void testCustomLists() throws Exception { ObjectMapper mapper = new ObjectMapper(); SimpleModule module = new SimpleModule("test", Version.unknownVersion()); JsonSerializer<?> ser = new CollectionSerializer(null, false, null, null); final JsonSerializer<Object> collectionSerializer = (JsonSerializer<Object>) ser; module.addSerializer(Collection.class, new JsonSerializer<Collection>() { @Override public void serialize(Collection value, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonProcessingException { if (value.size() != 0) { collectionSerializer.serialize(value, jgen, provider); } else { jgen.writeNull(); } } }); mapper.registerModule(module); }
Code: public void writeNull() throws IOException { _appendValue(JsonToken.VALUE_NULL); }
tensor([[0.1157, 0.0941, 0.1613, 0.2706, 0.0610, 0.1589, 0.0881, 0.0503],
        [0.0960, 0.0798, 0.1743, 0.3477, 0.0497, 0.1492, 0.0571, 0.0462],
        [0.0865, 0.0849, 0.1609, 0.3068, 0.0639, 0.1843, 0.0695, 0.0432],
        [0.0780, 0.0731, 0.1446, 0.3964, 0.0466, 0.1723, 0.0543, 0.0347],
        [0.0961, 0.0757, 0.1421, 0.3721, 0.0524, 0.1637, 0.0624, 0.0354],
        [0.1181, 0.1010, 0.1772, 0.2140, 0.0753, 0.1660, 0.0861, 0.0623],
        [0.0812, 0.0597, 0.1420, 0.3666, 0.0513, 0.2057, 0.0647, 0.0288],
        [0.0831, 0.0747, 0.1452, 0.3517, 0.0621, 0.1901, 0.0510, 0.0420]])