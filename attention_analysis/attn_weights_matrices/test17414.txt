17414
Test: public void testAlwaysRunSafetyCheck() { CompilerOptions options = createCompilerOptions(); options.checkSymbols = false; options.customPasses = ArrayListMultimap.create(); options.customPasses.put( CustomPassExecutionTime.BEFORE_OPTIMIZATIONS, new CompilerPass() { @Override public void process(Node externs, Node root) { Node var = root.getLastChild().getFirstChild(); var.detachFromParent(); } }); try { test(options, "var x = 3; function f() { return x + z; }", "function f() { return x + z; }"); fail("Expected runtime exception"); } catch (RuntimeException e) { } }
Code: public void process(Node externs, Node root) { (new NodeTraversal(compiler, this)).traverseRoots(externs, root); }
[[0.08177998 0.06398819 0.07496551 0.03046305 0.13736506 0.1689268
 0.0917138  0.06580587 0.04856149 0.16490102 0.04047702 0.03105221]
[0.0803609  0.06000858 0.08038422 0.02416026 0.16817656 0.18567461
 0.09357825 0.06089085 0.04865588 0.13496767 0.03275171 0.03039053]
[0.07100757 0.05998905 0.08574536 0.02954677 0.14200497 0.19522277
 0.08069988 0.05815024 0.03714735 0.18194088 0.03783409 0.02071107]
[0.07521019 0.07307622 0.09852587 0.03281138 0.1429021  0.14378592
 0.09509362 0.06764822 0.05316559 0.13338047 0.04931616 0.0350842 ]
[0.07241884 0.05950291 0.08745864 0.02886363 0.16840686 0.1538067
 0.10172565 0.0642735  0.04803122 0.16208647 0.0305104  0.02291513]
[0.07809018 0.0520054  0.08113413 0.03744709 0.15595318 0.15408984
 0.10599469 0.0512347  0.053358   0.15023763 0.04326462 0.03719054]
[0.08355773 0.07039554 0.08814275 0.04638436 0.12863193 0.11700997
 0.10554789 0.07354411 0.04862018 0.14983864 0.04651713 0.04180977]
[0.06856367 0.05476581 0.10174318 0.02815772 0.13758472 0.15897015
 0.10055938 0.06883669 0.04494855 0.16742197 0.04132022 0.02712796]
[0.0729095  0.06952456 0.07970536 0.03260202 0.17013666 0.15443826
 0.10663392 0.05719195 0.04253498 0.15109831 0.03762104 0.02560339]
[0.07793174 0.05718263 0.08055832 0.03140353 0.14676134 0.14863533
 0.10350589 0.05948394 0.04304835 0.17536679 0.04551441 0.03060771]
[0.06967994 0.05557607 0.08137339 0.02537264 0.17299578 0.16888028
 0.1160092  0.0644022  0.04693139 0.13953683 0.03727359 0.02196865]
[0.06346894 0.05374913 0.09838743 0.03280609 0.1978753  0.12848955
 0.11143547 0.05945091 0.05353822 0.13715701 0.03717084 0.02647105]]