16525
Test: public void testGetScopeRoot() { Compiler compiler = new Compiler(); NodeTraversal t = new NodeTraversal(compiler, new NodeTraversal.ScopedCallback() { @Override public void enterScope(NodeTraversal t) { Node root1 = t.getScopeRoot(); Node root2 = t.getScope().getRootNode(); } @Override public void exitScope(NodeTraversal t) { } @Override public boolean shouldTraverse(NodeTraversal t, Node n, Node parent) { return true; } @Override public void visit(NodeTraversal t, Node n, Node parent) { } } ); String code = "" + "var a; " + "function foo() {" + " var b" + "}"; Node tree = parse(compiler, code); t.traverse(tree); }
Code: public void enterScope(NodeTraversal t) { Node n = t.getCurrentNode().getParent(); if (n != null && isCallToScopeMethod(n)) { transformation = transformationHandler.logAliasTransformation( n.getSourceFileName(), getSourceRegion(n)); } }
[[0.02891011 0.02413458 0.21618949 0.01479451 0.0445703  0.0598547
 0.01801201 0.01857527 0.02393319 0.07853932 0.02390186 0.01655011
 0.03140435 0.01937926 0.03756088 0.0445703  0.03969823 0.01857527
 0.06221727 0.04503308 0.1063252  0.01363531 0.01363531]
[0.01968454 0.01878018 0.2987626  0.00867646 0.04163844 0.05989417
 0.01263191 0.01726586 0.01400488 0.06662582 0.01671708 0.01384777
 0.02253596 0.01325388 0.03456077 0.04163844 0.03646795 0.01726586
 0.05213505 0.03328354 0.13558842 0.0123702  0.0123702 ]
[0.01940842 0.01573308 0.30520293 0.0092485  0.04189935 0.06338014
 0.01532761 0.01648688 0.01437516 0.0859369  0.01740059 0.01096989
 0.01899469 0.01578364 0.0254806  0.04189935 0.03777362 0.01648688
 0.0627672  0.02609027 0.1221111  0.00862161 0.00862161]
[0.01580556 0.01466624 0.28218287 0.00890695 0.05623444 0.05873817
 0.01580036 0.01628008 0.01716776 0.07778606 0.01896081 0.00962671
 0.01647891 0.01406835 0.03057173 0.05623444 0.03818029 0.01628008
 0.06099701 0.02914153 0.13004166 0.00792502 0.00792502]
[0.03155429 0.02756869 0.18295202 0.01618025 0.05111837 0.0525087
 0.02095494 0.02628659 0.02844763 0.05429505 0.02715607 0.02242982
 0.02567147 0.0275995  0.03752219 0.05111837 0.05019277 0.02628659
 0.06168503 0.03558144 0.10696507 0.01796259 0.01796259]
[0.02067208 0.02236686 0.262374   0.01189474 0.05242923 0.06556263
 0.01957778 0.02019482 0.01905664 0.07387534 0.01644749 0.01559304
 0.0234704  0.01650013 0.03404516 0.05242923 0.04323578 0.02019483
 0.0595194  0.02813101 0.10332049 0.00955444 0.00955444]
[0.02153023 0.02517922 0.33090454 0.00944178 0.04610842 0.04855496
 0.01451793 0.013291   0.01551252 0.06605753 0.01687139 0.01129763
 0.02051403 0.01485093 0.02905555 0.04610842 0.03898938 0.013291
 0.05123574 0.02773682 0.11997451 0.00948823 0.00948823]
[0.03572612 0.02914045 0.1376655  0.02340814 0.04037311 0.054593
 0.02646731 0.02962762 0.02999222 0.07908583 0.02623039 0.02992553
 0.02940241 0.03039964 0.03397898 0.04037311 0.04687274 0.02962762
 0.07542539 0.03501467 0.10163976 0.01751521 0.01751521]
[0.01989068 0.0178571  0.23581348 0.0122916  0.05231945 0.06262071
 0.018737   0.01940344 0.02019506 0.07531681 0.01803112 0.01343764
 0.02214181 0.02152075 0.03052669 0.05231945 0.04398924 0.01940344
 0.06953433 0.0321003  0.12206417 0.01024285 0.01024285]
[0.01319693 0.0114292  0.3974529  0.00445569 0.04003257 0.0606386
 0.00790024 0.01138411 0.00847636 0.07900198 0.02443436 0.00642283
 0.01115783 0.00789351 0.0227038  0.04003257 0.02854067 0.01138411
 0.04780239 0.01514743 0.13922614 0.00564288 0.00564288]
[0.02452632 0.01899382 0.28228697 0.01059382 0.04752157 0.06171412
 0.01316188 0.01826522 0.01667539 0.07812816 0.01999191 0.01483857
 0.01888782 0.01695332 0.02799816 0.04752157 0.04042425 0.01826522
 0.06287371 0.03045677 0.11056177 0.0096798  0.0096798 ]
[0.01814372 0.01357794 0.2720815  0.00835506 0.05280644 0.06402075
 0.01268935 0.01592607 0.01259999 0.07910162 0.01576236 0.00860377
 0.01802871 0.0125245  0.02436683 0.05280644 0.03811671 0.01592607
 0.07021461 0.02619469 0.15066364 0.00874465 0.00874465]
[0.02379743 0.01897923 0.22531897 0.01223628 0.06121687 0.0696757
 0.01867484 0.02139274 0.01945136 0.07503712 0.0165886  0.01378145
 0.02153776 0.01892197 0.03428338 0.06121687 0.04579661 0.02139274
 0.0569634  0.03329598 0.11216813 0.00913629 0.00913629]
[0.02150311 0.02157744 0.28583145 0.0110268  0.04898847 0.05306007
 0.01441036 0.01827796 0.01550218 0.068347   0.01933035 0.01515183
 0.02409089 0.01533354 0.03459411 0.04898847 0.04199639 0.01827796
 0.05611815 0.03254245 0.10434998 0.01535053 0.01535053]
[0.02371822 0.01994275 0.23053628 0.00889274 0.05309563 0.05484577
 0.01425306 0.01969942 0.01880432 0.0822887  0.01384852 0.01279203
 0.02217517 0.01567253 0.03403277 0.05309563 0.0488482  0.01969942
 0.06232914 0.03812606 0.12965088 0.01182637 0.01182637]
[0.03155429 0.02756869 0.18295202 0.01618025 0.05111837 0.0525087
 0.02095494 0.02628659 0.02844763 0.05429505 0.02715607 0.02242982
 0.02567147 0.0275995  0.03752219 0.05111837 0.05019277 0.02628659
 0.06168503 0.03558144 0.10696507 0.01796259 0.01796259]
[0.02552789 0.02779906 0.20061608 0.01461764 0.04590886 0.04811345
 0.01723973 0.02231978 0.02049742 0.06820504 0.01932354 0.0184017
 0.02675354 0.01989994 0.03434192 0.04590886 0.06031509 0.02231978
 0.06111809 0.0390785  0.12781198 0.01694104 0.01694104]
[0.03572612 0.02914045 0.1376655  0.02340814 0.04037311 0.054593
 0.02646731 0.02962762 0.02999222 0.07908583 0.02623039 0.02992553
 0.02940241 0.03039964 0.03397898 0.04037311 0.04687274 0.02962762
 0.07542539 0.03501467 0.10163976 0.01751521 0.01751521]
[0.02121929 0.01846855 0.27258748 0.01317191 0.05313276 0.04719247
 0.01420415 0.01382293 0.02133882 0.07569861 0.01613247 0.01563846
 0.02404014 0.01947617 0.03490258 0.05313276 0.04139967 0.01382294
 0.04859151 0.03406658 0.12326949 0.01234513 0.01234513]
[0.02983684 0.02424036 0.19515862 0.01647517 0.0483942  0.060766
 0.02366153 0.0208698  0.0229487  0.07018115 0.01993002 0.01682241
 0.02937911 0.02172231 0.03153087 0.0483942  0.04644261 0.0208698
 0.05397473 0.03766361 0.1312171  0.0147604  0.0147604 ]
[0.02721671 0.0221784  0.17059532 0.01739059 0.0506645  0.05344336
 0.02104711 0.02170875 0.02288744 0.0958965  0.02289002 0.02149234
 0.02289147 0.02175327 0.0372924  0.0506645  0.04876829 0.02170875
 0.06532156 0.03441023 0.1216331  0.0140727  0.01407271]
[0.02111297 0.01964555 0.1897637  0.01348902 0.05489371 0.08374962
 0.01916818 0.01916043 0.02085815 0.08161911 0.01481741 0.01549435
 0.02391448 0.01814909 0.03592807 0.05489371 0.04020752 0.01916043
 0.08008952 0.03250074 0.11781982 0.01178226 0.01178226]
[0.02111297 0.01964555 0.1897637  0.01348902 0.05489371 0.08374962
 0.01916818 0.01916043 0.02085815 0.08161911 0.01481741 0.01549435
 0.02391448 0.01814909 0.03592807 0.05489371 0.04020752 0.01916043
 0.08008952 0.03250074 0.11781982 0.01178226 0.01178226]]