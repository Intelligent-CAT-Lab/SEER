66531
Test: public void testCustomLists() throws Exception { ObjectMapper mapper = new ObjectMapper(); SimpleModule module = new SimpleModule("test", Version.unknownVersion()); JsonSerializer<?> ser = new CollectionSerializer(null, false, null, null); final JsonSerializer<Object> collectionSerializer = (JsonSerializer<Object>) ser; module.addSerializer(Collection.class, new JsonSerializer<Collection>() { @Override public void serialize(Collection value, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonProcessingException { if (value.size() != 0) { collectionSerializer.serialize(value, jgen, provider); } else { jgen.writeNull(); } } }); mapper.registerModule(module); }
Code: public void writeNull() throws IOException { _appendValue(JsonToken.VALUE_NULL); }
[[0.11566025 0.09413517 0.16134661 0.27060723 0.06099199 0.15889663
 0.08805941 0.05030268]
[0.09597957 0.0798367  0.174337   0.34767726 0.04970233 0.14921257
 0.05710171 0.04615284]
[0.08652313 0.08494767 0.16086194 0.30683243 0.06390567 0.18425621
 0.06951304 0.04315988]
[0.07799035 0.07310385 0.14460103 0.39642167 0.0465715  0.1722928
 0.05432739 0.03469143]
[0.09606005 0.07571402 0.14212021 0.37212253 0.05244673 0.16369736
 0.06243115 0.03540794]
[0.11807071 0.10095056 0.1772206  0.21395628 0.07534596 0.16604783
 0.0860656  0.06234245]
[0.08122955 0.05973285 0.1419964  0.3665975  0.05129546 0.20567496
 0.06470638 0.02876688]
[0.08309023 0.07474898 0.14524227 0.35170427 0.06207044 0.19013144
 0.05096884 0.04204343]]