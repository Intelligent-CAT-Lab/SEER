19448
Test: public void testConstantAnnotationMismatch() throws Exception { otherPass = new CompilerPass() { @Override public void process(Node externs, Node root) { getLastCompiler().reportCodeChange(); Node name = Node.newString(Token.NAME, "x"); name.putBooleanProp(Node.IS_CONSTANT_NAME, true); root.addChildToBack(new Node(Token.EXPR_RESULT, name)); getLastCompiler().setNormalized(); } }; boolean exceptionCaught = false; try { test("var x;", "var x; x;"); } catch (RuntimeException e) { exceptionCaught = true; } }
Code: public void process(Node externs, Node root) { NodeTraversal.traverse(compiler, root, this); removeDuplicateDeclarations(root); if (false) { MakeDeclaredNamesUnique renamer = new MakeDeclaredNamesUnique(); NodeTraversal t = new NodeTraversal(compiler, renamer); ; } ; }
[[0.03230563 0.0261084  0.02747589 0.01259378 0.06046323 0.06180583
 0.04289824 0.04769441 0.03087074 0.09752633 0.01684898 0.08706024
 0.02308516 0.04289824 0.02694748 0.02467936 0.02031607 0.01630579
 0.04296575 0.03406691 0.05683186 0.02031607 0.01630579 0.02149399
 0.0465116  0.0180865  0.01372561 0.0180865  0.0137256 ]
[0.02660929 0.02259092 0.02351931 0.00970841 0.06815343 0.05436296
 0.04346377 0.04624746 0.03406465 0.12472875 0.01280115 0.08807676
 0.01622388 0.04346377 0.02590048 0.02187118 0.02117945 0.01204415
 0.05105758 0.02586444 0.05048274 0.02117945 0.01204415 0.02197026
 0.06758813 0.01405465 0.01334708 0.01405465 0.01334708]
[0.02595318 0.02406458 0.02633877 0.01290341 0.06140193 0.06187753
 0.03985332 0.06043136 0.04280283 0.10342899 0.01334601 0.09782024
 0.01935615 0.03985332 0.02444971 0.02432309 0.01766215 0.01338605
 0.05202008 0.03646446 0.04964541 0.01766215 0.01338605 0.01684676
 0.05654452 0.01511433 0.00897467 0.01511433 0.00897467]
[0.02945862 0.0293518  0.03256681 0.01351754 0.05972303 0.04903989
 0.04582587 0.04952218 0.03033845 0.07598817 0.01483192 0.08123152
 0.02214051 0.04582587 0.02350156 0.02692618 0.01792122 0.01533509
 0.05775373 0.02452981 0.06069147 0.01792122 0.01533509 0.02484031
 0.07201207 0.01642959 0.01550542 0.01642959 0.01550542]
[0.02384817 0.02317681 0.02441959 0.01060743 0.06709942 0.04519706
 0.04906825 0.05289028 0.03780217 0.10790668 0.01390789 0.08876135
 0.019294   0.04906825 0.02519861 0.02425438 0.02157773 0.01298605
 0.05322492 0.02762783 0.04851219 0.02157773 0.01298605 0.02126535
 0.06886469 0.01488681 0.00955176 0.01488681 0.00955176]
[0.02853872 0.01986672 0.0279978  0.01496412 0.06338093 0.05227076
 0.04887323 0.04382993 0.02866832 0.10839559 0.01435244 0.08597444
 0.02314887 0.04887323 0.0225055  0.0218895  0.01916093 0.01514636
 0.05323665 0.02968818 0.0572785  0.01916093 0.01514636 0.02309064
 0.04705219 0.01788393 0.01587066 0.01788393 0.01587066]
[0.03280052 0.02845145 0.03069641 0.01846201 0.05375972 0.04373787
 0.05078156 0.04237555 0.024322   0.08848348 0.01645532 0.05674929
 0.02628194 0.05078156 0.02789081 0.03109492 0.02721814 0.01858418
 0.05155123 0.03076162 0.04706687 0.02721814 0.01858418 0.0216106
 0.06103103 0.01840755 0.01821723 0.01840755 0.01821723]
[0.02651118 0.02543747 0.02463061 0.01235707 0.06549674 0.05990346
 0.04309804 0.04845253 0.03198213 0.07877211 0.01388553 0.09097357
 0.0242465  0.04309804 0.02297983 0.02602287 0.01883456 0.01742363
 0.05063837 0.03565986 0.05736943 0.01883456 0.01742363 0.02746208
 0.05398637 0.01915756 0.01310231 0.01915756 0.01310231]
[0.0292386  0.02023044 0.02363413 0.01443123 0.06305277 0.05567057
 0.04176485 0.05676008 0.03386065 0.10300922 0.01635028 0.08224045
 0.02226544 0.04176485 0.03132335 0.02521628 0.02255194 0.01343587
 0.05265338 0.04166459 0.05459204 0.02255194 0.01343587 0.0203246
 0.04126606 0.01599444 0.01236079 0.01599444 0.01236079]
[0.02896978 0.01764708 0.0350714  0.0148069  0.05734018 0.05129848
 0.05121601 0.05119373 0.02447321 0.10200472 0.01801298 0.08299884
 0.02676952 0.05121601 0.02654098 0.02734539 0.02041719 0.01630695
 0.05553193 0.03102876 0.05177186 0.02041719 0.01630695 0.02282218
 0.04872051 0.01305683 0.01182883 0.01305683 0.01182883]
[0.03048626 0.02032624 0.02363891 0.01113378 0.05425568 0.0588072
 0.04157845 0.05114626 0.03304778 0.12346514 0.01399787 0.10516058
 0.02166483 0.04157845 0.02788687 0.02391998 0.01572645 0.01141899
 0.05186389 0.02887633 0.04745774 0.01572645 0.01141899 0.01732419
 0.07490014 0.01365831 0.00793797 0.01365831 0.00793797]
[0.02225935 0.01615171 0.0251098  0.00579025 0.07128254 0.06002062
 0.04182641 0.05282824 0.02880362 0.12023623 0.00914103 0.12365039
 0.01631564 0.04182641 0.02230691 0.01880347 0.01699189 0.00840859
 0.04632608 0.0286511  0.06188796 0.01699189 0.00840859 0.01975002
 0.08345079 0.00978527 0.00660497 0.00978527 0.00660497]
[0.02588258 0.02442546 0.02142442 0.0107039  0.08094686 0.0547723
 0.04454322 0.05193888 0.02769713 0.08822593 0.01136356 0.11608613
 0.0198264  0.04454322 0.02220401 0.02349596 0.0180794  0.0143714
 0.04971956 0.0233563  0.05775278 0.0180794  0.0143714  0.0254066
 0.06352861 0.01383863 0.00978864 0.01383863 0.00978864]
[0.03280052 0.02845145 0.03069641 0.01846201 0.05375972 0.04373787
 0.05078156 0.04237555 0.024322   0.08848348 0.01645532 0.05674929
 0.02628194 0.05078156 0.02789081 0.03109492 0.02721814 0.01858418
 0.05155123 0.03076162 0.04706687 0.02721814 0.01858418 0.0216106
 0.06103103 0.01840755 0.01821723 0.01840755 0.01821723]
[0.02629885 0.02205665 0.02610835 0.01173913 0.06535898 0.05720305
 0.0534815  0.04748768 0.03021935 0.09332784 0.01552596 0.09126651
 0.02466565 0.0534815  0.02930727 0.02029433 0.01926719 0.01541569
 0.04284752 0.03269913 0.055725   0.01926719 0.01541569 0.02368078
 0.0543822  0.01664988 0.01008862 0.01664988 0.01008862]
[0.02494869 0.02352932 0.02633483 0.01150714 0.0598998  0.04509337
 0.06740124 0.05257122 0.02817856 0.08615985 0.01293499 0.08893314
 0.02216328 0.06740124 0.02571262 0.03028686 0.01613299 0.01184778
 0.06480044 0.0225432  0.05495268 0.01613299 0.01184778 0.02341405
 0.05602399 0.01484612 0.00977789 0.01484612 0.00977789]
[0.03471139 0.02813457 0.03425763 0.02065194 0.05226859 0.04742145
 0.03834623 0.04841682 0.02239805 0.08333212 0.01875156 0.07666585
 0.02794734 0.03834623 0.02583521 0.03652397 0.02853272 0.01628647
 0.04660629 0.03084615 0.05180579 0.02853272 0.01628647 0.02428832
 0.04580931 0.0216929  0.01680552 0.0216929  0.01680551]
[0.02834722 0.02528478 0.02794649 0.01333802 0.04790733 0.05371993
 0.04975781 0.0511205  0.02914963 0.09813717 0.01513758 0.09726612
 0.0255004  0.04975781 0.02295979 0.02292513 0.02281388 0.01860887
 0.05160204 0.02487579 0.04423346 0.02281388 0.01860887 0.02013802
 0.05662133 0.01615345 0.01456063 0.01615345 0.01456063]
[0.02790392 0.02177606 0.02512334 0.01264939 0.06707739 0.05692726
 0.03746193 0.04897939 0.03086695 0.10655947 0.01150349 0.10181771
 0.0239608  0.03746193 0.0240208  0.0252327  0.01910178 0.01319985
 0.05169497 0.02476851 0.05943661 0.01910178 0.01319985 0.02332628
 0.06251577 0.01332253 0.01384354 0.01332253 0.01384354]
[0.02266778 0.01668817 0.02468919 0.00918353 0.05936411 0.05709545
 0.04786336 0.04990836 0.02514744 0.11689579 0.01332234 0.08939353
 0.02323253 0.04786336 0.01889525 0.01969877 0.02007792 0.01417969
 0.065323   0.02937485 0.06914916 0.02007792 0.01417969 0.02226631
 0.05530773 0.01409082 0.00998651 0.01409082 0.00998651]
[0.02575494 0.01870367 0.02979399 0.00958806 0.0775773  0.04275277
 0.05925997 0.04675832 0.02635564 0.11375231 0.01236398 0.10807614
 0.01922924 0.05925997 0.02135827 0.02149278 0.01499953 0.01155433
 0.04971583 0.02204917 0.04794835 0.01499953 0.01155433 0.02012014
 0.07062892 0.01255018 0.00962609 0.01255018 0.00962609]
[0.03471139 0.02813457 0.03425763 0.02065194 0.05226859 0.04742145
 0.03834623 0.04841682 0.02239805 0.08333212 0.01875156 0.07666585
 0.02794734 0.03834623 0.02583521 0.03652397 0.02853272 0.01628647
 0.04660629 0.03084615 0.05180579 0.02853272 0.01628647 0.02428832
 0.04580931 0.0216929  0.01680552 0.0216929  0.01680551]
[0.02834722 0.02528478 0.02794649 0.01333802 0.04790733 0.05371993
 0.04975781 0.0511205  0.02914963 0.09813717 0.01513758 0.09726612
 0.0255004  0.04975781 0.02295979 0.02292513 0.02281388 0.01860887
 0.05160204 0.02487579 0.04423346 0.02281388 0.01860887 0.02013802
 0.05662133 0.01615345 0.01456063 0.01615345 0.01456063]
[0.02574321 0.02742267 0.02570659 0.01258452 0.06745078 0.05125006
 0.0493256  0.04702258 0.03115747 0.12232298 0.01050443 0.07717711
 0.02120711 0.0493256  0.02741556 0.0251876  0.01769089 0.01491253
 0.05388294 0.02855255 0.05531342 0.01769089 0.01491253 0.01851394
 0.05424808 0.01593482 0.01080434 0.01593482 0.01080434]
[0.03207519 0.02417974 0.0333518  0.01490333 0.0543587  0.06266022
 0.04774291 0.037911   0.02596519 0.09834045 0.01736915 0.08737087
 0.02799444 0.04774291 0.0237399  0.02328649 0.01906507 0.01432371
 0.04883939 0.03049919 0.05917911 0.01906507 0.01432371 0.02468212
 0.05745003 0.01402261 0.01276752 0.01402261 0.01276752]
[0.02145009 0.01573113 0.01793879 0.01058402 0.06591806 0.06185502
 0.06072479 0.0547199  0.02795444 0.12562606 0.01621033 0.09409904
 0.02041712 0.06072479 0.0237201  0.02102751 0.01856684 0.0140397
 0.04897779 0.03025496 0.04167604 0.01856684 0.0140397  0.01653501
 0.05670356 0.01332894 0.00764028 0.01332894 0.00764028]
[0.022249   0.02023459 0.03109313 0.01263506 0.08350474 0.04273307
 0.05312312 0.05822016 0.026393   0.10193361 0.01377762 0.08497436
 0.01765678 0.05312312 0.02621856 0.02218974 0.01967826 0.01244818
 0.05237336 0.02968891 0.05348976 0.01967826 0.01244818 0.0245168
 0.0486417  0.01686122 0.01162729 0.01686122 0.01162729]
[0.02145009 0.01573113 0.01793879 0.01058402 0.06591806 0.06185502
 0.06072479 0.0547199  0.02795444 0.12562606 0.01621033 0.09409904
 0.02041712 0.06072479 0.0237201  0.02102751 0.01856684 0.0140397
 0.04897779 0.03025496 0.04167604 0.01856684 0.0140397  0.01653501
 0.05670356 0.01332894 0.00764028 0.01332894 0.00764028]
[0.02224899 0.02023458 0.03109313 0.01263506 0.08350474 0.04273307
 0.05312312 0.05822017 0.026393   0.10193358 0.01377762 0.08497434
 0.01765678 0.05312312 0.02621855 0.02218974 0.01967825 0.01244818
 0.05237337 0.02968892 0.05348975 0.01967825 0.01244818 0.0245168
 0.0486417  0.01686122 0.01162729 0.01686122 0.01162729]]