17415
Test: public void testAlwaysRunSafetyCheck() { CompilerOptions options = createCompilerOptions(); options.checkSymbols = false; options.customPasses = ArrayListMultimap.create(); options.customPasses.put( CustomPassExecutionTime.BEFORE_OPTIMIZATIONS, new CompilerPass() { @Override public void process(Node externs, Node root) { Node var = root.getLastChild().getFirstChild(); var.detachFromParent(); } }); try { test(options, "var x = 3; function f() { return x + z; }", "function f() { return x + z; }"); fail("Expected runtime exception"); } catch (RuntimeException e) { } }
Code: public void process(Node externs, Node root) { (new NodeTraversal(compiler, this)).traverse(root); }
[[0.09050334 0.07137664 0.08151402 0.03409175 0.15621677 0.18360993
 0.10601339 0.07299447 0.05530654 0.11302043 0.03535271]
[0.08335482 0.06400271 0.0813769  0.02616454 0.18249938 0.18799151
 0.10512929 0.06308965 0.05425552 0.11849041 0.03364531]
[0.07813796 0.06796871 0.0897824  0.0344379  0.16495147 0.20616092
 0.09827522 0.06431842 0.04386738 0.12802418 0.02407546]
[0.0830987  0.08126551 0.10452489 0.03673199 0.16058949 0.1536293
 0.11124124 0.07417452 0.06163198 0.09307935 0.04003306]
[0.07806635 0.06675949 0.09107886 0.03191971 0.19004297 0.16181834
 0.12103041 0.06826631 0.05575632 0.10909414 0.02616704]
[0.08564977 0.05799856 0.08714715 0.04249627 0.17816263 0.16450456
 0.12754408 0.05659594 0.06252189 0.09405029 0.04332886]
[0.09176673 0.07777318 0.09459779 0.05108467 0.14311299 0.1272664
 0.12119619 0.07981673 0.05482244 0.1116264  0.04693644]
[0.07415713 0.06044929 0.10521992 0.03130919 0.15509427 0.1666395
 0.11850596 0.07327433 0.05191839 0.13252339 0.03090859]
[0.07754864 0.07638092 0.08271537 0.03558466 0.18720591 0.16148958
 0.12329862 0.06086578 0.04819945 0.11798565 0.02872541]
[0.08038436 0.06267338 0.08766121 0.03643412 0.15816471 0.19113082
 0.13092759 0.05815876 0.05766774 0.09913055 0.03766683]
[0.06610868 0.05675796 0.10059367 0.03480065 0.21395573 0.13255168
 0.12387626 0.06224488 0.05895688 0.12127809 0.02887559]]