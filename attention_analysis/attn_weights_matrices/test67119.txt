67119
Test: public void testEnumWithJsonValue() throws Exception { final Set<String> values = new TreeSet<String>(); MAPPER.acceptJsonFormatVisitor(TestEnumWithJsonValue.class, new JsonFormatVisitorWrapper.Base() { @Override public JsonStringFormatVisitor expectStringFormat(JavaType type) { return new JsonStringFormatVisitor() { @Override public void enumTypes(Set<String> enums) { values.addAll(enums); } @Override public void format(JsonValueFormat format) { } }; } }); TreeSet<String> exp = new TreeSet<String>(Arrays.asList( "value-A", "value-B", "value-C" )); }
Code: public static void addAll(Map<String, JsonSerializer<?>> allDeserializers) { final JsonSerializer<?> intS = new IntegerSerializer(); allDeserializers.put(Integer.class.getName(), intS); allDeserializers.put(Integer.TYPE.getName(), intS); allDeserializers.put(Long.class.getName(), LongSerializer.instance); allDeserializers.put(Long.TYPE.getName(), LongSerializer.instance); allDeserializers.put(Byte.class.getName(), IntLikeSerializer.instance); allDeserializers.put(Byte.TYPE.getName(), IntLikeSerializer.instance); allDeserializers.put(Short.class.getName(), ShortSerializer.instance); allDeserializers.put(Short.TYPE.getName(), ShortSerializer.instance); allDeserializers.put(Float.class.getName(), FloatSerializer.instance); allDeserializers.put(Float.TYPE.getName(), FloatSerializer.instance); allDeserializers.put(Double.class.getName(), DoubleSerializer.instance); allDeserializers.put(Double.TYPE.getName(), DoubleSerializer.instance); }
[[0.01671104 0.05541324 0.01390622 0.01562727 0.03821513 0.02019775
 0.02540691 0.01382535 0.07290407 0.03553852 0.0107144  0.00821254
 0.04587119 0.06694844 0.02165277 0.01257861 0.02165277 0.01251365
 0.01145884 0.01651976 0.01145884 0.03047876 0.01905318 0.03387382
 0.01905318 0.02018309 0.0509125  0.04146859 0.0509125  0.02720577
 0.0083737  0.04363005 0.0083737  0.01681302 0.02878361 0.01696984
 0.02878362 0.00780373]
[0.01796099 0.05160649 0.01267836 0.0145705  0.03756916 0.01736802
 0.03625038 0.01379041 0.07915601 0.02982112 0.0116526  0.00792921
 0.04061966 0.06929411 0.01801264 0.01686768 0.01801264 0.01405598
 0.01148711 0.01597731 0.01148711 0.02610228 0.01903865 0.02832815
 0.01903865 0.01936625 0.0457803  0.03943427 0.0457803  0.02448754
 0.01051017 0.03993745 0.01051017 0.01699704 0.04143523 0.01610233
 0.04143523 0.00954853]
[0.01298237 0.04941442 0.01183335 0.01025618 0.02897383 0.01530784
 0.0249272  0.01182544 0.09081563 0.0363961  0.01096024 0.00602512
 0.06037552 0.07399154 0.02172126 0.01344327 0.02172126 0.01296734
 0.00758276 0.01639763 0.00758276 0.02839974 0.0153898  0.02760115
 0.0153898  0.014549   0.05393536 0.0478798  0.05393536 0.02288245
 0.00682013 0.03848314 0.00682013 0.01980986 0.03828822 0.01853536
 0.03828824 0.00749142]
[0.01273791 0.04424351 0.00921111 0.01393886 0.04633401 0.01901004
 0.03744651 0.01090245 0.10026798 0.03426852 0.00941807 0.00612132
 0.05855877 0.06323113 0.02013445 0.01451102 0.02013445 0.0123847
 0.00829431 0.02108828 0.00829431 0.02887261 0.01314418 0.02651715
 0.01314418 0.01905708 0.05344294 0.03647063 0.05344294 0.02351441
 0.00757802 0.04198475 0.00757802 0.01660942 0.03235485 0.01778314
 0.03235486 0.00561912]
[0.01319833 0.04719037 0.01127845 0.01255777 0.0460536  0.01930057
 0.02698168 0.01402428 0.09561047 0.03033413 0.01159588 0.00824832
 0.0472362  0.06389306 0.01738603 0.01597769 0.01738603 0.01701726
 0.01094428 0.01697545 0.01094428 0.02753433 0.01620814 0.02925828
 0.01620814 0.02064108 0.04398656 0.04296242 0.04398656 0.02506812
 0.00921339 0.04516883 0.00921339 0.02010496 0.03647496 0.01697723
 0.03647497 0.00638452]
[0.01244858 0.04768702 0.00852895 0.01378619 0.05457927 0.01976725
 0.02879578 0.01333202 0.11012921 0.03305318 0.01236403 0.007996
 0.050843   0.04729484 0.01574454 0.01284209 0.01574454 0.01345861
 0.01168492 0.01493221 0.01168492 0.0217871  0.01537299 0.0274574
 0.01537299 0.02337219 0.05241291 0.04751194 0.05241291 0.02133657
 0.00712682 0.03835287 0.00712682 0.02000003 0.03752443 0.01292492
 0.03752444 0.00568558]
[0.01997112 0.0479227  0.01753405 0.01541972 0.03909868 0.01992669
 0.03333059 0.01965751 0.06703755 0.02554653 0.01668136 0.01096587
 0.0430323  0.04678255 0.01914696 0.01880327 0.01914696 0.01654627
 0.01240368 0.02439528 0.01240368 0.02733945 0.02114091 0.02647306
 0.02114091 0.02122169 0.04553386 0.03530108 0.04553386 0.02528129
 0.01153257 0.03517135 0.01153257 0.02397328 0.0366211  0.01827118
 0.03662109 0.01155739]
[0.01679677 0.05047425 0.01278773 0.01336983 0.04036981 0.01450016
 0.03062441 0.011442   0.10520592 0.03207114 0.01296306 0.00732143
 0.04927398 0.06156701 0.0177898  0.01338658 0.0177898  0.01334416
 0.00877281 0.02133962 0.00877281 0.03340375 0.0149274  0.02965845
 0.0149274  0.02076144 0.04721279 0.044314   0.04721279 0.02407581
 0.00703808 0.034145   0.00703808 0.01926714 0.03554568 0.01903788
 0.03554568 0.00592555]
[0.01842589 0.0418435  0.01523775 0.01584789 0.0336385  0.0200212
 0.0350645  0.01356758 0.08147033 0.03124778 0.01340923 0.00919849
 0.03965839 0.06159717 0.01656632 0.01640961 0.01656632 0.017002
 0.01166449 0.01556155 0.01166449 0.02637833 0.01829569 0.02902488
 0.01829569 0.02239138 0.04140764 0.04535609 0.04140764 0.0257042
 0.01254268 0.03790335 0.01254268 0.02001256 0.04319153 0.01633962
 0.04319152 0.01035153]
[0.01292734 0.05693702 0.01002352 0.01472792 0.04809375 0.01768727
 0.03222802 0.01234029 0.09891326 0.02743986 0.01165388 0.00720487
 0.04771878 0.06096326 0.01480689 0.01216732 0.01480689 0.01247135
 0.01039736 0.01744613 0.01039736 0.0262775  0.01532508 0.0241046
 0.01532508 0.02027981 0.05131194 0.04052648 0.05131194 0.02807648
 0.00843884 0.03889893 0.00843884 0.01778707 0.04026875 0.01655669
 0.04026875 0.0054508 ]
[0.02196408 0.05458401 0.01797765 0.01540268 0.02674481 0.0244286
 0.02512912 0.01851274 0.05588588 0.02703191 0.01830349 0.01035381
 0.0514328  0.0522677  0.01927701 0.02017037 0.01927701 0.01640821
 0.01708539 0.01518649 0.01708539 0.02730742 0.0221456  0.02531729
 0.0221456  0.02131136 0.04046839 0.04215438 0.04046839 0.03439053
 0.01568331 0.03104333 0.01568331 0.02735829 0.0285521  0.02206701
 0.0285521  0.01084247]
[0.01569547 0.04912822 0.01513866 0.0124018  0.03048367 0.0167097
 0.032455   0.01285473 0.09763028 0.0396001  0.01221741 0.00973978
 0.04172589 0.06818353 0.01617329 0.01247881 0.01617329 0.01397733
 0.01140351 0.01751663 0.01140351 0.02560945 0.01575911 0.03253181
 0.01575911 0.02542958 0.04276398 0.04681791 0.04276398 0.02320756
 0.00970764 0.03654691 0.00970764 0.02351804 0.03437299 0.01890279
 0.03437299 0.00913785]
[0.01489454 0.06399608 0.0103684  0.01446748 0.04078437 0.02235263
 0.02789464 0.01397216 0.08214555 0.03151954 0.01290782 0.00827001
 0.05507951 0.05420521 0.01605822 0.01471357 0.01605822 0.01290582
 0.0109056  0.01909329 0.0109056  0.02762933 0.01788108 0.02868683
 0.01788108 0.01854835 0.04369926 0.04648354 0.04369926 0.02619438
 0.00948739 0.04468279 0.00948739 0.01855477 0.03412881 0.01741494
 0.03412881 0.0079137 ]
[0.01270474 0.06891218 0.01239909 0.0115988  0.03444774 0.01455009
 0.0351941  0.01275234 0.10652232 0.02981567 0.01003711 0.00632872
 0.04872169 0.06517053 0.01700961 0.0140535  0.01700961 0.01317025
 0.00693822 0.01919034 0.00693822 0.02609623 0.01499607 0.02420575
 0.01499607 0.01944593 0.05172114 0.04728642 0.05172114 0.02284068
 0.0079049  0.04537043 0.0079049  0.01880399 0.03174978 0.0141361
 0.0317498  0.00560579]
[0.01454842 0.07260038 0.01059284 0.012494   0.03749989 0.01517913
 0.02792544 0.01643767 0.09606966 0.03392253 0.00869671 0.00827982
 0.05203331 0.05284955 0.01921863 0.01096245 0.01921863 0.01376375
 0.00772742 0.01832973 0.00772742 0.02544138 0.01504854 0.02417576
 0.01504854 0.02210289 0.05244454 0.04221784 0.05244454 0.02149452
 0.00684972 0.04199368 0.00684972 0.02052812 0.03803014 0.01396126
 0.03803014 0.0072613 ]
[0.0179277  0.03960706 0.01451937 0.01252749 0.03857062 0.01702867
 0.0299162  0.01564434 0.11486559 0.03449219 0.01308936 0.00838541
 0.0378515  0.06166819 0.01710827 0.01635558 0.01710827 0.01704039
 0.01324592 0.01931057 0.01324592 0.02760408 0.01500467 0.02348407
 0.01500467 0.02207278 0.045537   0.04760548 0.045537   0.02468554
 0.00921336 0.0383952  0.00921336 0.01702477 0.03382922 0.01441384
 0.03382922 0.00803711]
[0.01454842 0.07260038 0.01059284 0.012494   0.03749989 0.01517913
 0.02792544 0.01643767 0.09606966 0.03392253 0.00869671 0.00827982
 0.05203331 0.05284955 0.01921863 0.01096245 0.01921863 0.01376375
 0.00772742 0.01832973 0.00772742 0.02544138 0.01504854 0.02417576
 0.01504854 0.02210289 0.05244454 0.04221784 0.05244454 0.02149452
 0.00684972 0.04199368 0.00684972 0.02052812 0.03803014 0.01396126
 0.03803014 0.0072613 ]
[0.01118968 0.05520873 0.01034218 0.011763   0.03630748 0.0227946
 0.03019304 0.01270146 0.12847684 0.02713626 0.00951086 0.00628737
 0.04219221 0.07324141 0.01442655 0.0082697  0.01442655 0.01062199
 0.00947501 0.01865457 0.00947501 0.02983846 0.01517841 0.03265906
 0.01517841 0.02125347 0.04750748 0.04106474 0.04750748 0.02099284
 0.00615608 0.04048764 0.00615608 0.01742583 0.03763283 0.01334009
 0.03763284 0.00729374]
[0.01507175 0.04869055 0.013753   0.01650852 0.04369795 0.01802297
 0.03253131 0.0120499  0.08540644 0.0366462  0.01086066 0.0088624
 0.0409358  0.05585421 0.02070737 0.01427314 0.02070737 0.01706985
 0.00973563 0.01773796 0.00973563 0.02720545 0.01485797 0.03208781
 0.01485797 0.01655515 0.05599459 0.04101059 0.05599459 0.02514166
 0.00845779 0.03654092 0.00845779 0.01927879 0.03596365 0.01615003
 0.03596365 0.00662305]
[0.01626881 0.04823702 0.01193563 0.01136561 0.04023359 0.02079041
 0.03512562 0.01407119 0.09225105 0.03299421 0.00988725 0.00900782
 0.0519926  0.06540573 0.01706759 0.01394401 0.01706759 0.01481749
 0.01132187 0.0158627  0.01132187 0.02599921 0.01792044 0.0297096
 0.01792044 0.02205793 0.04494006 0.04810657 0.04494006 0.02209831
 0.00725377 0.0396331  0.00725377 0.02315573 0.0325974  0.01478065
 0.0325974  0.00806586]
[0.01507175 0.04869055 0.013753   0.01650852 0.04369795 0.01802297
 0.03253131 0.0120499  0.08540644 0.0366462  0.01086066 0.0088624
 0.0409358  0.05585421 0.02070737 0.01427314 0.02070737 0.01706985
 0.00973563 0.01773796 0.00973563 0.02720545 0.01485797 0.03208781
 0.01485797 0.01655515 0.05599459 0.04101059 0.05599459 0.02514166
 0.00845779 0.03654092 0.00845779 0.01927879 0.03596365 0.01615003
 0.03596365 0.00662305]
[0.01190193 0.05548558 0.00827445 0.01104947 0.03672591 0.02241326
 0.02579706 0.01387049 0.11358692 0.03010984 0.00918411 0.00656066
 0.05797701 0.06918878 0.01807763 0.01075757 0.01807763 0.01008179
 0.00942077 0.01606357 0.00942077 0.02343379 0.01572577 0.02240515
 0.01572577 0.01976335 0.04731744 0.05214073 0.04731744 0.02595802
 0.00575296 0.04462642 0.00575296 0.01776242 0.03363895 0.01986074
 0.03363895 0.00515396]
[0.0105475  0.05072709 0.00969607 0.01280813 0.03454996 0.0177038
 0.03638497 0.01233945 0.12393601 0.02837651 0.01184829 0.00633808
 0.04694882 0.07286757 0.01253127 0.01132122 0.01253127 0.00991312
 0.00931538 0.01868563 0.00931538 0.02514917 0.01653274 0.02703502
 0.01653274 0.02278815 0.0521284  0.04650027 0.0521284  0.0238599
 0.00581103 0.0392206  0.00581103 0.01699955 0.03459157 0.01633978
 0.03459157 0.0052946 ]
[0.01253804 0.04787127 0.01079581 0.01575335 0.04153254 0.01733385
 0.03839927 0.01336753 0.09374572 0.03801801 0.00998073 0.0079222
 0.04604985 0.05743849 0.01735774 0.01584318 0.01735774 0.01242594
 0.00970841 0.016815   0.00970841 0.0271465  0.01603298 0.02898863
 0.01603298 0.01972335 0.05824246 0.03630411 0.05824246 0.02360044
 0.00859288 0.03656093 0.00859288 0.01688305 0.03416507 0.02026986
 0.03416507 0.00649325]
[0.0105475  0.05072709 0.00969607 0.01280813 0.03454996 0.0177038
 0.03638497 0.01233945 0.12393601 0.02837651 0.01184829 0.00633808
 0.04694882 0.07286757 0.01253127 0.01132122 0.01253127 0.00991312
 0.00931538 0.01868563 0.00931538 0.02514917 0.01653274 0.02703502
 0.01653274 0.02278815 0.0521284  0.04650027 0.0521284  0.0238599
 0.00581103 0.0392206  0.00581103 0.01699955 0.03459157 0.01633978
 0.03459157 0.0052946 ]
[0.01447711 0.05080595 0.00922572 0.01148196 0.04115118 0.01908808
 0.02705606 0.01163157 0.09627523 0.03607097 0.01330022 0.00663549
 0.051507   0.0732387  0.01610396 0.01174384 0.01610396 0.01323444
 0.00879377 0.01799016 0.00879377 0.02947447 0.01499835 0.03045296
 0.01499835 0.01537684 0.05434336 0.04523441 0.05434336 0.02232397
 0.00640177 0.03861858 0.00640177 0.01922397 0.03622825 0.0149055
 0.03622825 0.0057368 ]
[0.01404074 0.05681699 0.01147354 0.01427639 0.03593839 0.01681592
 0.03601994 0.01207841 0.10143538 0.03639517 0.00829177 0.00599333
 0.04214181 0.06116946 0.01830501 0.01217471 0.01830501 0.01274968
 0.00948242 0.01938334 0.00948242 0.02842082 0.01562665 0.03366573
 0.01562665 0.01764358 0.04664851 0.0468943  0.04664851 0.02364764
 0.00826467 0.04220476 0.00826467 0.01308055 0.03750247 0.01807833
 0.03750247 0.00750983]
[0.01318046 0.05990187 0.01207825 0.01335769 0.0370255  0.01468186
 0.03205661 0.01488223 0.07890198 0.03025896 0.01217907 0.00852954
 0.0431352  0.05795466 0.01695668 0.01658956 0.01695668 0.0126304
 0.00983742 0.0227755  0.00983742 0.02753044 0.01785611 0.02712109
 0.01785611 0.02428229 0.05685864 0.04415775 0.05685864 0.0220727
 0.00921055 0.03803085 0.00921055 0.01925946 0.03525363 0.01762801
 0.03525363 0.00785204]
[0.01404074 0.05681699 0.01147354 0.01427639 0.03593839 0.01681592
 0.03601994 0.01207841 0.10143538 0.03639517 0.00829177 0.00599333
 0.04214181 0.06116946 0.01830501 0.01217471 0.01830501 0.01274968
 0.00948242 0.01938334 0.00948242 0.02842082 0.01562665 0.03366573
 0.01562665 0.01764358 0.04664851 0.0468943  0.04664851 0.02364764
 0.00826467 0.04220476 0.00826467 0.01308055 0.03750247 0.01807833
 0.03750247 0.00750983]
[0.01899477 0.05759867 0.01411819 0.016482   0.04977326 0.0153216
 0.03426335 0.01561742 0.07314825 0.02648529 0.01101699 0.00984048
 0.04344458 0.05405603 0.01832074 0.01628995 0.01832074 0.01479915
 0.0119637  0.01952967 0.0119637  0.02864063 0.01781536 0.02685364
 0.01781536 0.0196051  0.04563377 0.03886852 0.04563377 0.02659732
 0.00967739 0.03628105 0.00967739 0.02029679 0.0387127  0.01999531
 0.0387127  0.00783473]
[0.01237308 0.05321287 0.01247999 0.01336983 0.0300443  0.01488342
 0.03274088 0.01250909 0.12942882 0.03427416 0.01045177 0.00790697
 0.05205151 0.06645142 0.01741639 0.0099259  0.01741639 0.01210474
 0.00807698 0.01880191 0.00807698 0.02833965 0.01368572 0.02830611
 0.01368572 0.0199734  0.05122986 0.04272589 0.05122986 0.02231869
 0.00824478 0.03458287 0.00824478 0.02154998 0.02967479 0.01360342
 0.02967479 0.00893234]
[0.01781498 0.05080166 0.01574214 0.01427042 0.04774236 0.02119489
 0.02582715 0.01504096 0.07441407 0.0280049  0.01241082 0.00947618
 0.04697686 0.0481683  0.01882832 0.01470035 0.01882832 0.01510904
 0.01240852 0.01759793 0.01240852 0.02635235 0.01515404 0.02606812
 0.01515404 0.02385547 0.04869691 0.03958543 0.04869691 0.02687386
 0.00954371 0.04205012 0.00954371 0.01974679 0.04241656 0.01886338
 0.04241656 0.00721537]
[0.01237308 0.05321287 0.01247999 0.01336983 0.0300443  0.01488342
 0.03274088 0.01250909 0.12942882 0.03427416 0.01045177 0.00790697
 0.05205151 0.06645142 0.01741639 0.0099259  0.01741639 0.01210474
 0.00807698 0.01880191 0.00807698 0.02833965 0.01368572 0.02830611
 0.01368572 0.0199734  0.05122986 0.04272589 0.05122986 0.02231869
 0.00824478 0.03458287 0.00824478 0.02154998 0.02967479 0.01360342
 0.02967479 0.00893234]
[0.01658255 0.04455931 0.01199071 0.01348745 0.03648829 0.01741658
 0.03295401 0.01146216 0.10497233 0.03254267 0.00984489 0.00711996
 0.04326338 0.06318605 0.0158666  0.01375685 0.0158666  0.01264665
 0.01109914 0.01812971 0.01109914 0.03182394 0.01223217 0.03246996
 0.01223217 0.01886538 0.05450533 0.04793672 0.05450533 0.02693731
 0.00851937 0.03235149 0.00851937 0.01919788 0.03476826 0.01933938
 0.03476827 0.00669272]
[0.01481263 0.06055794 0.00951887 0.01307555 0.04140379 0.0161032
 0.02182193 0.01519517 0.09970774 0.03121946 0.01039166 0.00693228
 0.05099329 0.06215435 0.01883068 0.01227704 0.01883068 0.01190004
 0.01096772 0.02156492 0.01096772 0.03142553 0.01574158 0.02777281
 0.01574158 0.01936299 0.05038403 0.03934364 0.05038403 0.02991952
 0.0074088  0.04288423 0.0074088  0.01770702 0.03087801 0.01780206
 0.03087802 0.00573068]
[0.01330177 0.0645551  0.00918051 0.01229318 0.04446847 0.01473619
 0.02664939 0.01156376 0.11550657 0.03353567 0.00804853 0.00505774
 0.05172561 0.06733349 0.01663948 0.01013173 0.01663948 0.01093802
 0.00843403 0.01923477 0.00843403 0.02612843 0.01325258 0.02664265
 0.01325258 0.01568494 0.0577724  0.04015134 0.0577724  0.0229575
 0.00702353 0.03795332 0.00702353 0.01402625 0.03577185 0.01520468
 0.03577185 0.0052027 ]
[0.01481263 0.06055792 0.00951887 0.01307555 0.04140379 0.01610321
 0.02182193 0.01519517 0.09970772 0.03121946 0.01039166 0.00693228
 0.05099329 0.06215435 0.01883068 0.01227704 0.01883068 0.01190004
 0.01096772 0.02156493 0.01096772 0.03142554 0.01574158 0.02777281
 0.01574158 0.019363   0.05038401 0.03934364 0.05038401 0.02991952
 0.0074088  0.04288423 0.0074088  0.01770702 0.03087802 0.01780206
 0.03087802 0.00573068]
[0.01256573 0.05331281 0.01168498 0.01635697 0.0372455  0.01918377
 0.03259636 0.01138063 0.08314908 0.03227219 0.01139555 0.00704431
 0.0493354  0.06398861 0.01764018 0.01637683 0.01764018 0.01220609
 0.01119518 0.02286388 0.01119518 0.03459301 0.01769039 0.03022055
 0.01769039 0.01894484 0.05386964 0.03640949 0.05386964 0.02096262
 0.00890099 0.03427476 0.00890099 0.0185462  0.03621806 0.01506095
 0.03621807 0.00699996]]