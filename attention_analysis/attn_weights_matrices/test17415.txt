17415
Test: public void testAlwaysRunSafetyCheck() { CompilerOptions options = createCompilerOptions(); options.checkSymbols = false; options.customPasses = ArrayListMultimap.create(); options.customPasses.put( CustomPassExecutionTime.BEFORE_OPTIMIZATIONS, new CompilerPass() { @Override public void process(Node externs, Node root) { Node var = root.getLastChild().getFirstChild(); var.detachFromParent(); } }); try { test(options, "var x = 3; function f() { return x + z; }", "function f() { return x + z; }"); fail("Expected runtime exception"); } catch (RuntimeException e) { } }
Code: public void process(Node externs, Node root) { (new NodeTraversal(compiler, this)).traverse(root); }
tensor([[0.0905, 0.0714, 0.0815, 0.0341, 0.1562, 0.1836, 0.1060, 0.0730, 0.0553,
         0.1130, 0.0354],
        [0.0834, 0.0640, 0.0814, 0.0262, 0.1825, 0.1880, 0.1051, 0.0631, 0.0543,
         0.1185, 0.0336],
        [0.0781, 0.0680, 0.0898, 0.0344, 0.1650, 0.2062, 0.0983, 0.0643, 0.0439,
         0.1280, 0.0241],
        [0.0831, 0.0813, 0.1045, 0.0367, 0.1606, 0.1536, 0.1112, 0.0742, 0.0616,
         0.0931, 0.0400],
        [0.0781, 0.0668, 0.0911, 0.0319, 0.1900, 0.1618, 0.1210, 0.0683, 0.0558,
         0.1091, 0.0262],
        [0.0856, 0.0580, 0.0871, 0.0425, 0.1782, 0.1645, 0.1275, 0.0566, 0.0625,
         0.0941, 0.0433],
        [0.0918, 0.0778, 0.0946, 0.0511, 0.1431, 0.1273, 0.1212, 0.0798, 0.0548,
         0.1116, 0.0469],
        [0.0742, 0.0604, 0.1052, 0.0313, 0.1551, 0.1666, 0.1185, 0.0733, 0.0519,
         0.1325, 0.0309],
        [0.0775, 0.0764, 0.0827, 0.0356, 0.1872, 0.1615, 0.1233, 0.0609, 0.0482,
         0.1180, 0.0287],
        [0.0804, 0.0627, 0.0877, 0.0364, 0.1582, 0.1911, 0.1309, 0.0582, 0.0577,
         0.0991, 0.0377],
        [0.0661, 0.0568, 0.1006, 0.0348, 0.2140, 0.1326, 0.1239, 0.0622, 0.0590,
         0.1213, 0.0289]])