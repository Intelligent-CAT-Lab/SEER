17414
Test: public void testAlwaysRunSafetyCheck() { CompilerOptions options = createCompilerOptions(); options.checkSymbols = false; options.customPasses = ArrayListMultimap.create(); options.customPasses.put( CustomPassExecutionTime.BEFORE_OPTIMIZATIONS, new CompilerPass() { @Override public void process(Node externs, Node root) { Node var = root.getLastChild().getFirstChild(); var.detachFromParent(); } }); try { test(options, "var x = 3; function f() { return x + z; }", "function f() { return x + z; }"); fail("Expected runtime exception"); } catch (RuntimeException e) { } }
Code: public void process(Node externs, Node root) { (new NodeTraversal(compiler, this)).traverseRoots(externs, root); }
tensor([[0.0818, 0.0640, 0.0750, 0.0305, 0.1374, 0.1689, 0.0917, 0.0658, 0.0486,
         0.1649, 0.0405, 0.0311],
        [0.0804, 0.0600, 0.0804, 0.0242, 0.1682, 0.1857, 0.0936, 0.0609, 0.0487,
         0.1350, 0.0328, 0.0304],
        [0.0710, 0.0600, 0.0857, 0.0295, 0.1420, 0.1952, 0.0807, 0.0582, 0.0371,
         0.1819, 0.0378, 0.0207],
        [0.0752, 0.0731, 0.0985, 0.0328, 0.1429, 0.1438, 0.0951, 0.0676, 0.0532,
         0.1334, 0.0493, 0.0351],
        [0.0724, 0.0595, 0.0875, 0.0289, 0.1684, 0.1538, 0.1017, 0.0643, 0.0480,
         0.1621, 0.0305, 0.0229],
        [0.0781, 0.0520, 0.0811, 0.0374, 0.1560, 0.1541, 0.1060, 0.0512, 0.0534,
         0.1502, 0.0433, 0.0372],
        [0.0836, 0.0704, 0.0881, 0.0464, 0.1286, 0.1170, 0.1055, 0.0735, 0.0486,
         0.1498, 0.0465, 0.0418],
        [0.0686, 0.0548, 0.1017, 0.0282, 0.1376, 0.1590, 0.1006, 0.0688, 0.0449,
         0.1674, 0.0413, 0.0271],
        [0.0729, 0.0695, 0.0797, 0.0326, 0.1701, 0.1544, 0.1066, 0.0572, 0.0425,
         0.1511, 0.0376, 0.0256],
        [0.0779, 0.0572, 0.0806, 0.0314, 0.1468, 0.1486, 0.1035, 0.0595, 0.0430,
         0.1754, 0.0455, 0.0306],
        [0.0697, 0.0556, 0.0814, 0.0254, 0.1730, 0.1689, 0.1160, 0.0644, 0.0469,
         0.1395, 0.0373, 0.0220],
        [0.0635, 0.0537, 0.0984, 0.0328, 0.1979, 0.1285, 0.1114, 0.0595, 0.0535,
         0.1372, 0.0372, 0.0265]])