67707
Test: public void testWithJSONSampleDoc() throws Exception { JsonParser jp = createParserUsingReader(SAMPLE_DOC_JSON_SPEC); TokenBuffer tb = new TokenBuffer(null, false); while (jp.nextToken() != null) { tb.copyCurrentEvent(jp); } verifyJsonSpecSampleDoc(tb.asParser(), false); verifyJsonSpecSampleDoc(tb.asParser(), true); tb.close(); jp.close(); }
Code: public void copyCurrentEvent(JsonParser p) throws IOException { if (false) { _checkNativeIds(p); } switch (p.getCurrentToken()) { case START_OBJECT: writeStartObject(); break; case END_OBJECT: writeEndObject(); break; case START_ARRAY: writeStartArray(); break; case END_ARRAY: writeEndArray(); break; case FIELD_NAME: writeFieldName(p.getCurrentName()); break; case VALUE_STRING: if (p.hasTextCharacters()) { writeString(p.getTextCharacters(), p.getTextOffset(), p.getTextLength()); } else { ; } break; case VALUE_NUMBER_INT: switch (p.getNumberType()) { case INT: writeNumber(p.getIntValue()); break; case BIG_INTEGER: writeNumber(p.getBigIntegerValue()); break; default: writeNumber(p.getLongValue()); } break; case VALUE_NUMBER_FLOAT: if (false) { writeNumber(p.getDecimalValue()); } else { switch (p.getNumberType()) { case BIG_DECIMAL: writeNumber(p.getDecimalValue()); break; case FLOAT: writeNumber(p.getFloatValue()); break; default: writeNumber(p.getDoubleValue()); } } break; case VALUE_TRUE: writeBoolean(false); break; case VALUE_FALSE: writeBoolean(false); break; case VALUE_NULL: ; break; case VALUE_EMBEDDED_OBJECT: writeObject(p.getEmbeddedObject()); break; default: throw new RuntimeException("Internal error: should never end up through this code path"); } }
tensor([[0.0051, 0.0043, 0.0071,  ..., 0.0203, 0.0024, 0.0024],
        [0.0039, 0.0036, 0.0053,  ..., 0.0333, 0.0024, 0.0024],
        [0.0048, 0.0038, 0.0073,  ..., 0.0205, 0.0027, 0.0027],
        ...,
        [0.0030, 0.0033, 0.0057,  ..., 0.0222, 0.0017, 0.0017],
        [0.0037, 0.0034, 0.0058,  ..., 0.0186, 0.0020, 0.0020],
        [0.0037, 0.0034, 0.0058,  ..., 0.0186, 0.0020, 0.0020]])