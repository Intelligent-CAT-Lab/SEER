62880
Test: public void testWrongType() throws IOException { JsonElement element = new JsonParser().parse("[[],\"A\"]"); JsonTreeReader reader = new JsonTreeReader(element); reader.beginArray(); try { reader.nextBoolean(); fail(); } catch (IllegalStateException expected) { } try { reader.nextNull(); fail(); } catch (IllegalStateException expected) { } try { reader.nextString(); fail(); } catch (IllegalStateException expected) { } try { reader.nextInt(); fail(); } catch (IllegalStateException expected) { } try { reader.nextLong(); fail(); } catch (IllegalStateException expected) { } try { reader.nextDouble(); fail(); } catch (IllegalStateException expected) { } try { reader.nextName(); fail(); } catch (IllegalStateException expected) { } try { reader.beginObject(); fail(); } catch (IllegalStateException expected) { } try { reader.endArray(); fail(); } catch (IllegalStateException expected) { } try { reader.endObject(); fail(); } catch (IllegalStateException expected) { } reader.beginArray(); reader.endArray(); try { reader.nextBoolean(); fail(); } catch (IllegalStateException expected) { } try { reader.nextNull(); fail(); } catch (IllegalStateException expected) { } try { reader.nextInt(); fail(); } catch (NumberFormatException expected) { } try { reader.nextLong(); fail(); } catch (NumberFormatException expected) { } try { reader.nextDouble(); fail(); } catch (NumberFormatException expected) { } try { reader.nextName(); fail(); } catch (IllegalStateException expected) { } reader.endArray(); }
Code: public long nextLong() throws IOException { int p = peeked; if (p == PEEKED_NONE) { p = doPeek(); } if (p == PEEKED_LONG) { peeked = PEEKED_NONE; pathIndices[stackSize - 1]++; return peekedLong; } if (p == PEEKED_NUMBER) { peekedString = new String(buffer, pos, peekedNumberLength); pos += peekedNumberLength; } else if (p == PEEKED_SINGLE_QUOTED || p == PEEKED_DOUBLE_QUOTED || p == PEEKED_UNQUOTED) { if (p == PEEKED_UNQUOTED) { peekedString = nextUnquotedValue(); } else { peekedString = nextQuotedValue(p == PEEKED_SINGLE_QUOTED ? '\'' : '"'); } try { long result = Long.parseLong(peekedString); peeked = PEEKED_NONE; pathIndices[stackSize - 1]++; return result; } catch (NumberFormatException ignored) { } } else { throw new IllegalStateException("Expected a long but was " + peek() + " at line " + getLineNumber() + " column " + getColumnNumber() + " path " + getPath()); } peeked = PEEKED_BUFFERED; double asDouble = Double.parseDouble(peekedString); long result = (long) asDouble; if (result != asDouble) { throw new NumberFormatException("Expected a long but was " + peekedString + " at line " + getLineNumber() + " column " + getColumnNumber() + " path " + getPath()); } peekedString = null; peeked = PEEKED_NONE; pathIndices[stackSize - 1]++; return result; }
tensor([[0.0038, 0.0060, 0.0023,  ..., 0.0042, 0.0065, 0.0018],
        [0.0026, 0.0050, 0.0020,  ..., 0.0038, 0.0060, 0.0016],
        [0.0027, 0.0047, 0.0018,  ..., 0.0040, 0.0066, 0.0016],
        ...,
        [0.0025, 0.0065, 0.0021,  ..., 0.0036, 0.0069, 0.0015],
        [0.0035, 0.0049, 0.0022,  ..., 0.0050, 0.0069, 0.0014],
        [0.0026, 0.0043, 0.0017,  ..., 0.0059, 0.0052, 0.0015]])