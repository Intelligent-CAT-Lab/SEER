64517
Test: public void testUtf8Issue462() throws Exception { ByteArrayOutputStream bytes = new ByteArrayOutputStream(); IOContext ioc = new IOContext(new BufferRecycler(), bytes, true); JsonGenerator gen = new UTF8JsonGenerator(ioc, 0, null, bytes); String str = "Natuurlijk is alles gelukt en weer een tevreden klant\uD83D\uDE04"; int length = 4000 - 38; for (int i = 1; i <= length; ++i) { gen.writeNumber(1); } gen.writeString(str); gen.flush(); gen.close(); JsonParser p = JSON_F.createParser(bytes.toByteArray()); for (int i = 1; i <= length; ++i) { } p.close(); }
Code: public void writeNumber(BigDecimal value){;if (value == null) {;} else if (true) {String raw = Feature.WRITE_BIGDECIMAL_AS_PLAIN.enabledIn(_features) ? value.toPlainString() : value.toString();_writeQuotedRaw(raw);} else if (Feature.WRITE_BIGDECIMAL_AS_PLAIN.enabledIn(_features)) {writeRaw(value.toPlainString());} else {writeRaw(_asString(value));}}
tensor([[0.0316, 0.0264, 0.0179, 0.0484, 0.0292, 0.0478, 0.0160, 0.0164, 0.0413,
         0.0858, 0.0747, 0.0553, 0.0202, 0.0203, 0.0394, 0.0496, 0.0559, 0.0321,
         0.0463, 0.0413, 0.0858, 0.0280, 0.0243, 0.0413, 0.0250],
        [0.0253, 0.0237, 0.0150, 0.0691, 0.0275, 0.0354, 0.0127, 0.0151, 0.0460,
         0.0852, 0.1172, 0.0530, 0.0185, 0.0219, 0.0352, 0.0499, 0.0466, 0.0242,
         0.0296, 0.0460, 0.0852, 0.0330, 0.0174, 0.0460, 0.0212],
        [0.0199, 0.0225, 0.0166, 0.0606, 0.0333, 0.0458, 0.0159, 0.0183, 0.0499,
         0.0761, 0.0908, 0.0604, 0.0212, 0.0238, 0.0346, 0.0562, 0.0514, 0.0207,
         0.0329, 0.0499, 0.0761, 0.0308, 0.0185, 0.0499, 0.0238],
        [0.0249, 0.0206, 0.0130, 0.0552, 0.0235, 0.0411, 0.0122, 0.0128, 0.0465,
         0.1091, 0.0991, 0.0438, 0.0198, 0.0197, 0.0338, 0.0491, 0.0470, 0.0227,
         0.0363, 0.0465, 0.1091, 0.0251, 0.0226, 0.0465, 0.0201],
        [0.0272, 0.0228, 0.0158, 0.0537, 0.0340, 0.0444, 0.0141, 0.0153, 0.0426,
         0.0840, 0.0936, 0.0395, 0.0233, 0.0221, 0.0424, 0.0553, 0.0467, 0.0275,
         0.0461, 0.0426, 0.0840, 0.0343, 0.0204, 0.0426, 0.0258],
        [0.0176, 0.0206, 0.0111, 0.0671, 0.0319, 0.0421, 0.0113, 0.0137, 0.0421,
         0.0961, 0.1135, 0.0538, 0.0175, 0.0187, 0.0330, 0.0463, 0.0565, 0.0260,
         0.0381, 0.0421, 0.0961, 0.0238, 0.0154, 0.0421, 0.0235],
        [0.0240, 0.0182, 0.0128, 0.0524, 0.0309, 0.0435, 0.0142, 0.0156, 0.0378,
         0.1074, 0.0998, 0.0511, 0.0174, 0.0160, 0.0378, 0.0494, 0.0482, 0.0191,
         0.0455, 0.0378, 0.1074, 0.0334, 0.0162, 0.0378, 0.0262],
        [0.0299, 0.0236, 0.0117, 0.0766, 0.0334, 0.0327, 0.0160, 0.0197, 0.0472,
         0.0720, 0.1050, 0.0557, 0.0216, 0.0187, 0.0434, 0.0523, 0.0457, 0.0192,
         0.0378, 0.0472, 0.0720, 0.0283, 0.0200, 0.0472, 0.0230],
        [0.0244, 0.0191, 0.0155, 0.0727, 0.0336, 0.0372, 0.0123, 0.0170, 0.0451,
         0.0785, 0.1039, 0.0547, 0.0222, 0.0176, 0.0333, 0.0497, 0.0559, 0.0225,
         0.0435, 0.0451, 0.0785, 0.0303, 0.0202, 0.0451, 0.0220],
        [0.0187, 0.0154, 0.0094, 0.0764, 0.0244, 0.0345, 0.0070, 0.0140, 0.0567,
         0.1095, 0.1243, 0.0436, 0.0136, 0.0156, 0.0284, 0.0402, 0.0446, 0.0163,
         0.0291, 0.0567, 0.1095, 0.0227, 0.0163, 0.0567, 0.0162],
        [0.0226, 0.0188, 0.0125, 0.0617, 0.0318, 0.0398, 0.0105, 0.0122, 0.0490,
         0.0892, 0.1183, 0.0592, 0.0194, 0.0198, 0.0293, 0.0458, 0.0484, 0.0232,
         0.0366, 0.0490, 0.0892, 0.0277, 0.0178, 0.0490, 0.0194],
        [0.0290, 0.0227, 0.0175, 0.0660, 0.0252, 0.0417, 0.0169, 0.0203, 0.0423,
         0.0865, 0.0741, 0.0590, 0.0252, 0.0251, 0.0390, 0.0391, 0.0489, 0.0253,
         0.0486, 0.0423, 0.0865, 0.0292, 0.0246, 0.0423, 0.0226],
        [0.0270, 0.0223, 0.0125, 0.0676, 0.0280, 0.0429, 0.0145, 0.0163, 0.0458,
         0.0963, 0.0921, 0.0480, 0.0189, 0.0192, 0.0364, 0.0450, 0.0441, 0.0238,
         0.0460, 0.0458, 0.0963, 0.0219, 0.0220, 0.0458, 0.0216],
        [0.0348, 0.0289, 0.0196, 0.0517, 0.0277, 0.0386, 0.0217, 0.0200, 0.0411,
         0.0775, 0.0648, 0.0589, 0.0275, 0.0296, 0.0392, 0.0465, 0.0459, 0.0306,
         0.0497, 0.0411, 0.0775, 0.0335, 0.0254, 0.0411, 0.0271],
        [0.0251, 0.0221, 0.0179, 0.0576, 0.0276, 0.0380, 0.0167, 0.0206, 0.0430,
         0.0891, 0.0936, 0.0650, 0.0219, 0.0189, 0.0378, 0.0476, 0.0501, 0.0264,
         0.0336, 0.0430, 0.0891, 0.0275, 0.0217, 0.0430, 0.0232],
        [0.0253, 0.0190, 0.0098, 0.0589, 0.0331, 0.0305, 0.0125, 0.0156, 0.0482,
         0.0900, 0.1023, 0.0694, 0.0142, 0.0170, 0.0366, 0.0491, 0.0517, 0.0300,
         0.0310, 0.0482, 0.0900, 0.0257, 0.0213, 0.0482, 0.0224],
        [0.0234, 0.0198, 0.0126, 0.0601, 0.0301, 0.0487, 0.0123, 0.0113, 0.0463,
         0.0861, 0.0833, 0.0458, 0.0208, 0.0165, 0.0378, 0.0653, 0.0534, 0.0332,
         0.0424, 0.0463, 0.0861, 0.0269, 0.0246, 0.0463, 0.0206],
        [0.0327, 0.0263, 0.0179, 0.0507, 0.0332, 0.0385, 0.0170, 0.0180, 0.0408,
         0.0736, 0.0779, 0.0503, 0.0266, 0.0260, 0.0489, 0.0650, 0.0463, 0.0239,
         0.0526, 0.0408, 0.0736, 0.0338, 0.0197, 0.0408, 0.0250],
        [0.0284, 0.0233, 0.0153, 0.0608, 0.0276, 0.0358, 0.0139, 0.0187, 0.0473,
         0.0953, 0.0885, 0.0505, 0.0241, 0.0203, 0.0296, 0.0430, 0.0517, 0.0234,
         0.0418, 0.0473, 0.0953, 0.0259, 0.0232, 0.0473, 0.0217],
        [0.0244, 0.0191, 0.0155, 0.0727, 0.0336, 0.0372, 0.0123, 0.0170, 0.0451,
         0.0785, 0.1039, 0.0547, 0.0222, 0.0176, 0.0333, 0.0497, 0.0559, 0.0225,
         0.0435, 0.0451, 0.0785, 0.0303, 0.0202, 0.0451, 0.0220],
        [0.0187, 0.0154, 0.0094, 0.0764, 0.0244, 0.0345, 0.0070, 0.0140, 0.0567,
         0.1095, 0.1243, 0.0436, 0.0136, 0.0156, 0.0284, 0.0402, 0.0446, 0.0163,
         0.0291, 0.0567, 0.1095, 0.0227, 0.0163, 0.0567, 0.0162],
        [0.0197, 0.0153, 0.0135, 0.0652, 0.0305, 0.0426, 0.0113, 0.0134, 0.0469,
         0.1069, 0.1080, 0.0466, 0.0188, 0.0171, 0.0268, 0.0426, 0.0485, 0.0208,
         0.0385, 0.0469, 0.1069, 0.0187, 0.0289, 0.0469, 0.0188],
        [0.0257, 0.0211, 0.0131, 0.0490, 0.0276, 0.0438, 0.0121, 0.0132, 0.0526,
         0.0971, 0.0940, 0.0483, 0.0159, 0.0194, 0.0362, 0.0438, 0.0610, 0.0282,
         0.0350, 0.0526, 0.0971, 0.0224, 0.0166, 0.0526, 0.0220],
        [0.0244, 0.0191, 0.0155, 0.0727, 0.0336, 0.0372, 0.0123, 0.0170, 0.0451,
         0.0785, 0.1039, 0.0547, 0.0222, 0.0176, 0.0333, 0.0497, 0.0559, 0.0225,
         0.0435, 0.0451, 0.0785, 0.0303, 0.0202, 0.0451, 0.0220],
        [0.0292, 0.0175, 0.0156, 0.0565, 0.0296, 0.0460, 0.0126, 0.0191, 0.0486,
         0.0911, 0.0859, 0.0468, 0.0214, 0.0229, 0.0319, 0.0612, 0.0544, 0.0204,
         0.0347, 0.0486, 0.0911, 0.0273, 0.0194, 0.0486, 0.0195]])