67322
Test: public void testTokenBuffer() throws Exception { JsonParser jp = createParserUsingReader(SAMPLE_DOC_JSON_SPEC); TokenBuffer tb = new TokenBuffer(null, false); while (jp.nextToken() != null) { tb.copyCurrentEvent(jp); } jp.close(); String str = serializeAsString(tb); tb.close(); verifyJsonSpecSampleDoc(createParserUsingReader(str), true); }
Code: public void copyCurrentEvent(JsonParser p){if (false) {_checkNativeIds(p);}switch (p.getCurrentToken()) {case START_OBJECT:writeStartObject();break;case END_OBJECT:writeEndObject();break;case START_ARRAY:writeStartArray();break;case END_ARRAY:writeEndArray();break;case FIELD_NAME:writeFieldName(p.getCurrentName());break;case VALUE_STRING:if (p.hasTextCharacters()) {writeString(p.getTextCharacters(), p.getTextOffset(), p.getTextLength());} else {writeString(p.getText());}break;case VALUE_NUMBER_INT:switch (p.getNumberType()) {case INT:writeNumber(p.getIntValue());break;case BIG_INTEGER:;break;default:writeNumber(p.getLongValue());}break;case VALUE_NUMBER_FLOAT:switch (p.getNumberType()) {case BIG_DECIMAL:writeNumber(p.getDecimalValue());break;case FLOAT:writeNumber(p.getFloatValue());break;default:writeNumber(p.getDoubleValue());}break;case VALUE_TRUE:writeBoolean(true);break;case VALUE_FALSE:;break;case VALUE_NULL:writeNull();break;case VALUE_EMBEDDED_OBJECT:writeObject(p.getEmbeddedObject());break;default:throw new RuntimeException("Internal error: should never end up through this code path");}}
tensor([[0.0142, 0.0123, 0.0215,  ..., 0.0141, 0.0234, 0.0117],
        [0.0103, 0.0108, 0.0162,  ..., 0.0139, 0.0225, 0.0100],
        [0.0128, 0.0103, 0.0211,  ..., 0.0133, 0.0198, 0.0138],
        ...,
        [0.0136, 0.0106, 0.0168,  ..., 0.0135, 0.0201, 0.0130],
        [0.0119, 0.0094, 0.0116,  ..., 0.0129, 0.0188, 0.0123],
        [0.0157, 0.0147, 0.0216,  ..., 0.0140, 0.0203, 0.0127]])